{"version":3,"sources":["webpack://celenganku-app/./src/scripts/views/pages/admin/dashboard.js","webpack://celenganku-app/./src/scripts/views/pages/admin/data-report.js"],"names":["QrScanner","QrScannerWorkerPath","AdminDashboard","render","afterRender","preloaders","document","querySelectorAll","processReportCard","getElementById","monthlyProcessText","weeklyProcessText","_monthly","_weekly","APIData","responseData","_adminId","id","_renderTable","transactionCodeInput","processTransactionButton","formValidation","formInputs","submitButton","qrScannerButton","addEventListener","ModalInitializer","title","content","bg","video","modal","videoContainer","qrScanner","result","console","log","_processTransaction","stop","remove","appendChild","$canvas","style","paddingTop","className","start","window","scanner","error","value","innerHTML","classList","forEach","preloader","response","Swal","icon","text","confirmButtonText","customClass","popup","confirmButton","buttonsStyling","status_transaksi","metode_pembayaran","id_transaksi","nisn","StringFormater","nominal","jenis_transaksi","toUpperCase","processButton","copyButton","copyText","EventHelper","focus","event","preventDefault","showCancelButton","cancelButtonText","showLoaderOnConfirm","preConfirm","id_admin","cancelButton","isConfirmed","tableElement","tableBody","querySelector","unsortedTransactionData","transactionData","sortBy","data","reverse","transactionTemplate","transaction","Object","keys","key","toString","timeStamp","Date","tenggat_waktu_pembayaran","seconds","jenisTransaksi","timeLeft","setDate","getDate","transactionDate","toLocaleDateString","year","month","day","transactionDateMini","getMonth","DateFormater","nominalColor","jenis","toLowerCase","_showTransactionModalInit","showButton","dataSiswa","nama","modalContent","thisContent","qrContent","showQRButton","_isQRContent","initialized","setInterval","DataReport","url","UrlParser","_userId","split","_reportTime","userAccount","userData","_ballance","saldo","_withdraw","_deposit","nameText","nisnText","alamatText","periodeText","firstBalanceText","lastBalanceText","withdrawText","depositText","downloadButton","print","alamat","date","y","getFullYear","m","firstDay","lastDay","firstDeposit","textContent","replace","firstBalance","length","reportTime","filteredData","filter","location","hash","thisSaldo","fixedSaldo","transactionElementArray","transactionRowTemplate","push","join"],"mappings":"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","file":"main.2d135e72.js","sourcesContent":["/* eslint-disable import/no-webpack-loader-syntax */\n/* eslint-disable import/no-unresolved */\nimport QrScanner from 'qr-scanner'\nimport sortBy from 'lodash/sortBy'\nimport Swal from 'sweetalert2'\nimport QrScannerWorkerPath from '!!file-loader!../../../../../node_modules/qr-scanner/qr-scanner-worker.min'\nimport APIData from '../../../data/api-data'\nimport StringFormater from '../../../helper/string-formater'\nimport ModalInitializer from '../../../utils/modal-initializer'\nimport EventHelper from '../../../helper/event-helper'\nimport formValidation from '../../../helper/form-validation'\nimport DateFormater from '../../../helper/date-formater'\n\nQrScanner.WORKER_PATH = QrScannerWorkerPath\n\nconst AdminDashboard = {\n  async render() {\n    return /* html */`\n    <div class=\"p-4 pt-0 md:p-8 md:pt=8 lg:p-12 lg:pt-12 h-full\">\n    <div class=\"flex flex-col h-full mb-20 md:mb-0 md:max-w-screen-md lg:max-w-screen-xl mx-auto\">\n      <div class=\"text-center\">\n        <p class=\"text-xl leading-8 font-bold tracking-tight text-gray-800 md:text-2xl md:mt-2\">\n          Celenganku<i class=\"text-secondary not-italic\">admin</i>\n        </p>\n      </div>\n\n      <div class=\"flex flex-col\">\n        <div class=\"bg-gray-200 gap-4 p-5 rounded-lg flex flex-wrap flex-col mt-4 md:p-8 md:gap-8 md:mt-6 md:flex-row\">\n          <div class=\"flex p-5 md:w-1/3 bg-secondary rounded-lg shadow-lg\">\n            <div class=\"flex flex-1 items-center\">\n            <div class=\"preloader p-4 flex mt-auto mb-auto mx-auto justify-center\">\n              <div class=\"loader admin loader-mini ease-linear rounded-full border-8 border-t-8 border-gray-200\"></div>\n            </div>\n              <div id=\"process-report-card\" class=\"hidden flex flex-col flex-1\">\n                <p class=\"-mb-2 text-white\">Proses Transaksi Bulan ini</p>\n                <p id=\"monthly-process\" class=\"text-white text-4xl md:text-2xl lg:text-4xl font-bold\">124</p>\n                <p class=\"-mb-1 mt-3 text-white\">Proses Transaksi Minggu ini</p>\n                <p id=\"weekly-process\" class=\"text-white text-xl md:text-lg lg:text-xl font-bold\">5</p>\n              </div>\n            </div>\n          </div>\n          <div class=\"flex flex-1 p-5 bg-white rounded-lg shadow-lg\">\n            <div class=\"flex flex-1 items-center\">\n\n              <div id=\"process-card\" class=\"flex flex-col flex-1 w-fill\">\n                <p class=\"mb-4 text-lg text-gray-600\">Proses Transaksi</p>\n                <p class=\"mb-2 text-gray-800 font-semibold\">Kode Transaksi</p>\n                <div class=\"flex flex-col md:flex-row mb-4\">\n                <div class=\"flex flex-1 flex-col\">\n                <input id=\"transaction-code\" name=\"Kode Transaksi\" data-rule=\"required no-space number-must-10\" value=\"\"\n                  class=\"flex flex-1 px-5 py-3 rounded-lg w-full bg-gray-200 text-gray-800\">\n                </div>\n                  <div class=\"flex mt-4 md:mt-0\">\n                      <button role=\"button\" disabled id=\"process-transaction\"\n                      class=\"w-max bg-secondary text-white mx-1 md:ml-4 py-3 px-8 rounded-lg disabled:opacity-50 disabled:cursor-default\">Proses</button>\n                      <button role=\"button\" id=\"scan-qr-button\" class=\"hidden md:block w-max text-secondary mx-1 font-light p-2\">\n                    <svg class=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z\"></path></svg></button>\n                  </div>\n                </div>\n                  </div>\n            </div>\n          </div>\n        </div>\n        <p class=\"mt-6 text-xl text-center md:text-left\">Riwayat Proses Transaksi</p>\n        <div class=\"bg-gray-200 p-5 rounded-lg flex flex-col mt-6 md:p-8\">\n          <div class=\"flex-1 py-0 white rounded-lg\">\n            <table id=\"transaction-table\" class=\"table-auto w-full\">\n              <tbody>\n                <tr class=\"text-left text-gray-700\">\n                  <th class=\"font-normal p-5 pr-0 pt-0\">Tanggal</th>\n                  <th class=\"font-normal pb-5 pt-0 hidden lg:table-cell\">NISN Siswa</th>\n                  <th class=\"font-normal pb-5 pt-0 hidden lg:table-cell\">Nominal</th>\n                  <th class=\"font-normal pb-5 pt-0\">Kode Transaksi</th>\n                  <th class=\"font-normal pb-5 pt-0 hidden lg:table-cell\">Jenis</th>\n                  <th class=\"font-normal pb-5 pt-0\">Status</th>\n                  <th class=\"font-normal pb-5 pt-0 justify-end\"></th>\n                </tr>\n              </tbody>\n            </table>\n            <div class=\"preloader p-4 flex mt-auto mb-auto mx-auto justify-center\">\n              <div class=\"loader admin loader-mini ease-linear rounded-full border-8 border-t-8 border-gray-200\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n        `\n  },\n\n  async afterRender() {\n    // Remove Preloders\n    const preloaders = document.querySelectorAll('.preloader')\n\n    const processReportCard = document.getElementById('process-report-card')\n    const monthlyProcessText = document.getElementById('monthly-process')\n    const weeklyProcessText = document.getElementById('weekly-process')\n    this._monthly = 0\n    this._weekly = 0\n\n    // Fetch Data\n    const responseData = await APIData.retrieveUser()\n    this._adminId = responseData.id\n\n    await this._renderTable()\n\n    const transactionCodeInput = document.getElementById('transaction-code')\n    const processTransactionButton = document.getElementById('process-transaction')\n    formValidation.init({\n      formInputs: transactionCodeInput,\n      submitButton: processTransactionButton,\n    })\n\n    const qrScannerButton = document.getElementById('scan-qr-button')\n    qrScannerButton.addEventListener('click', () => {\n      ModalInitializer.init({\n        title: 'Scan QR',\n        content:\n        `<div class=\"px-10 py-6\">\n          <div id=\"modal-content\">\n            <div id=\"video-container\" class=\"flex flex-row relative\">\n              <video class=\"w-full\" id=\"scanner-preview\"></video>\n            </div>\n          </div>\n          <div class=\"flex justify-end items-center w-100 mt-4\">\n            <button role=\"button\" data-modal=\"Scan QR\" class=\"w-max bg-secondary text-white mx-1 py-3 px-8 rounded-lg disabled:opacity-50\">Tutup</button>\n          </div>\n        </div>`,\n        bg: 'bg-secondary',\n      })\n      try {\n        const video = document.getElementById('scanner-preview')\n        const modal = document.getElementById('modal-scan-qr')\n        const videoContainer = document.getElementById('video-container')\n        const qrScanner = new QrScanner(video, async (result) => {\n          console.log('decoded qr code:', result)\n          await this._processTransaction(result)\n          qrScanner.stop()\n          modal.remove()\n        })\n        videoContainer.appendChild(qrScanner.$canvas)\n        video.style.paddingTop = '50%'\n        qrScanner.$canvas.className = 'absolute w-full h-full'\n        qrScanner.start()\n        window.scanner = qrScanner\n      } catch (error) {\n        console.log(`error: ${error}`)\n      }\n    })\n\n    processTransactionButton.addEventListener('click', async () => {\n      await this._processTransaction(transactionCodeInput.value)\n    })\n\n    monthlyProcessText.innerHTML = this._monthly\n    weeklyProcessText.innerHTML = this._weekly\n    processReportCard.classList.remove('hidden')\n    preloaders.forEach((preloader) => {\n      preloader.remove()\n    })\n  },\n\n  async _processTransaction(transactionCodeInput) {\n    const response = await APIData.getTransaction(transactionCodeInput)\n    console.log(response)\n    if (response.error) {\n      Swal.fire({\n        icon: 'error',\n        text: 'Kode Transaksi tidak valid',\n        title: 'Proses Transaksi Gagal',\n        confirmButtonText: 'Tutup',\n        customClass: {\n          popup: 'popup-sweetalert',\n          confirmButton: 'btn-sweetalert bg-secondary',\n        },\n        buttonsStyling: false,\n      })\n    } else if (response.status_transaksi === 'selesai') {\n      Swal.fire({\n        icon: 'error',\n        text: 'Transaksi ini sudah selesai diproses',\n        title: 'Proses Transaksi Gagal',\n        confirmButtonText: 'Tutup',\n        customClass: {\n          popup: 'popup-sweetalert',\n          confirmButton: 'btn-sweetalert bg-secondary',\n        },\n        buttonsStyling: false,\n      })\n    } else if (response.metode_pembayaran === 'daring') {\n      Swal.fire({\n        icon: 'error',\n        text: 'Transaksi ini dibuat dengan metode pembayaran daring',\n        title: 'Proses Transaksi Gagal',\n        confirmButtonText: 'Tutup',\n        customClass: {\n          popup: 'popup-sweetalert',\n          confirmButton: 'btn-sweetalert bg-secondary',\n        },\n        buttonsStyling: false,\n      })\n    } else {\n      ModalInitializer.init({\n        title: 'Transaksi',\n        content:\n        `<div class=\"px-10 py-6\">\n          <div id=\"modal-content\">\n            <p class=\"mt-2 mb-1\">Kode Transaksi</p>\n            <div class=\"flex flex-row\">\n              <p id=\"id-transaksi\" class=\"my-2 text-3xl select-all font-bold\">${response.id_transaksi}</p>\n              <button role=\"button\" id=\"copy-button\" class=\"w-max text-secondary ml-2 font-light p-2\">\n              <svg class=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3\"></path></svg>\n              </button>\n            </div>\n            <p class=\"mb-2 text-gray-800\">NISN</p>\n            <input name=\"NISN\" disabled value=\"${response.nisn}\"\n              class=\"mb-2 block px-5 py-3 rounded-lg w-full bg-gray-200 text-gray-500\">\n              <p class=\"mb-2 text-gray-800\">Nominal</p>\n            <input name=\"NISN\" disabled value=\"RP ${StringFormater.convertToCashFormat(response.nominal)}\"\n              class=\"mb-2 block px-5 py-3 rounded-lg w-full bg-gray-200 text-gray-500\">\n            <div class=\"flex flex-col md:flex-row md:gap-4\">\n              <div class=\"flex flex-1 flex-col\">\n              <p class=\"mb-2 text-gray-800\">Jenis Transaksi</p>\n              <input name=\"NISN\" disabled value=\"${response.jenis_transaksi.toUpperCase()}\"\n                class=\"mb-2 block px-5 py-3 rounded-lg w-full bg-gray-200 text-gray-500\">\n              </div>\n              <div class=\"flex flex-1 flex-col\">\n              <p class=\"mb-2 text-gray-800\">Metode Pembayaran</p>\n                <input name=\"NISN\" disabled value=\"${response.metode_pembayaran.toUpperCase()}\"\n                  class=\"mb-2 block px-5 py-3 rounded-lg w-full bg-gray-200 text-gray-500\">\n              </div>\n            </div>\n          </div>\n          <div class=\"flex justify-end items-center w-100 mt-4\">\n            <button role=\"button\" id=\"process-button\" class=\"w-max bg-secondary text-white mx-1 py-3 px-8 rounded-lg disabled:opacity-50\">Proses Transaksi</button>\n          </div>\n        </div>`,\n        bg: 'bg-secondary',\n      })\n      const modal = document.getElementById('modal-transaksi')\n      const processButton = document.getElementById('process-button')\n      const copyButton = document.getElementById('copy-button')\n      const copyText = document.getElementById('id-transaksi')\n      copyButton.addEventListener('click', () => {\n        EventHelper.copyTextToClipboard(response.id_transaksi)\n        copyText.focus()\n      })\n      processButton.addEventListener('click', async (event) => {\n        event.preventDefault()\n        const result = await Swal.fire({\n          icon: 'warning',\n          text: 'Tekan pilihan untuk mengkonfirmasi',\n          title: 'Konfirmasi Pembayaran?',\n          showCancelButton: true,\n          confirmButtonText: 'Konfirmasi',\n          cancelButtonText: 'Jangan',\n          showLoaderOnConfirm: true,\n          preConfirm: async () => {\n            try {\n              await APIData.updateTransaction(response.id_transaksi, {\n                id_admin: this._adminId,\n                status_transaksi: 'selesai',\n              })\n            } catch (error) {\n              Swal.showValidationMessage(\n                `Request failed: ${error}`,\n              )\n            }\n          },\n          customClass: {\n            popup: 'popup-sweetalert',\n            confirmButton: 'btn-sweetalert bg-success',\n            cancelButton: 'btn-sweetalert bg-failed',\n          },\n          buttonsStyling: false,\n        })\n\n        if (result.isConfirmed) {\n          // eslint-disable-next-line max-len\n          await APIData.updateSaldo(response.nisn, response.nominal, response.jenis_transaksi)\n          modal.remove()\n          this._renderTable()\n        }\n      })\n    }\n  },\n\n  async _renderTable() {\n    const tableElement = document.getElementById('transaction-table')\n    const tableBody = tableElement.querySelector('tbody')\n    const unsortedTransactionData = await APIData.getTransaksiAdmin(this._adminId)\n    const transactionData = sortBy(unsortedTransactionData.data, ['tenggat_waktu_pembayaran.seconds']).reverse()\n\n    const transactionTemplate = (transaction) => {\n      Object.keys(transaction).forEach((key) => {\n        if (typeof transaction[key] === 'object') {\n          //\n        } else if (key === 'nominal') {\n          transaction[key] = StringFormater.convertToCashFormat(transaction[key])\n        } else {\n          transaction[key] = transaction[key].toString().toUpperCase()\n        }\n      })\n\n      const timeStamp = new Date(transaction.tenggat_waktu_pembayaran.seconds * 1000)\n      const jenisTransaksi = transaction.jenis_transaksi\n      const timeLeft = new Date()\n      timeLeft.setDate(timeStamp.getDate())\n      timeStamp.setDate(timeStamp.getDate() - 1)\n      const transactionDate = timeStamp.toLocaleDateString('id-ID', { year: 'numeric', month: 'long', day: 'numeric' })\n      const transactionDateMini = timeStamp.toLocaleDateString('id-ID')\n\n      if (timeStamp.getMonth() === new Date().getMonth()) {\n        this._monthly++\n        if (DateFormater.isDateInThisWeek(timeStamp)) {\n          this._weekly++\n        }\n      }\n\n      // Classes\n      const nominalColor = (jenis) => {\n        if (jenis.toLowerCase() === 'pemasukan') return 'text-success'\n        return 'text-failed'\n      }\n\n      const _showTransactionModalInit = async (showButton) => {\n        const dataSiswa = await APIData.getDataSiswa(transaction.nisn)\n        showButton.addEventListener('click', () => {\n          ModalInitializer.init({\n            title: 'Transaksi',\n            content:\n            `<div class=\"px-10 py-6\">\n              <div id=\"modal-content\">\n                <p class=\"mt-2 mb-1\">Kode Transaksi kamu adalah</p>\n                <div class=\"flex flex-row\">\n                  <p id=\"id-transaksi\" class=\"my-2 text-3xl select-all font-bold\">${transaction.id_transaksi}</p>\n                  <button role=\"button\" id=\"copy-button\" class=\"w-max text-secondary ml-2 font-light p-2\">\n                  <svg class=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3\"></path></svg>\n                  </button>\n                </div>\n                <p class=\"mb-2 text-gray-800\">Nama Siswa</p>\n                <input name=\"NISN\" disabled value=\"${dataSiswa.nama} (${transaction.nisn})\"\n                  class=\"mb-2 block px-5 py-3 rounded-lg w-full bg-gray-200 text-gray-500\">\n                  <p class=\"mb-2 text-gray-800\">Nominal</p>\n                <input name=\"Nominal\" disabled value=\"RP ${transaction.nominal}\"\n                  class=\"mb-2 block px-5 py-3 rounded-lg w-full bg-gray-200 text-gray-500\">\n                <div class=\"flex flex-col md:flex-row md:gap-4\">\n                  <div class=\"flex flex-1 flex-col\">\n                  <p class=\"mb-2 text-gray-800\">Jenis Transaksi</p>\n                  <input name=\"Jenis Transaksi\" disabled value=\"${transaction.jenis_transaksi}\"\n                    class=\"mb-2 block px-5 py-3 rounded-lg w-full bg-gray-200 text-gray-500\">\n                  </div>\n                  <div class=\"flex flex-1 flex-col\">\n                  <p class=\"mb-2 text-gray-800\">Metode Pembayaran</p>\n                    <input name=\"Metode Pembayaran\" disabled value=\"${transaction.metode_pembayaran}\"\n                      class=\"mb-2 block px-5 py-3 rounded-lg w-full bg-gray-200 text-gray-500\">\n                  </div>\n                </div>\n              </div>\n              <div class=\"flex justify-end items-center w-100 mt-4\">\n                <button role=\"button\" data-modal=\"Transaksi\" class=\"w-max bg-secondary text-white mx-1 py-3 px-8 rounded-lg disabled:opacity-50\">Tutup</button>\n              </div>\n            </div>`,\n            bg: 'bg-secondary',\n          })\n          const modalContent = document.getElementById('modal-content')\n          const thisContent = modalContent.innerHTML\n          const qrContent = `<img class=\"mx-auto\" src=\"https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${transaction.id_transaksi}\"></img>`\n          const showQRButton = document.getElementById('show-qr-button')\n          const copyButton = document.getElementById('copy-button')\n          const copyText = document.getElementById('id-transaksi')\n          this._isQRContent = false\n          copyButton.addEventListener('click', () => {\n            EventHelper.copyTextToClipboard(transaction.id_transaksi)\n            copyText.focus()\n          })\n          showQRButton.addEventListener('click', (event) => {\n            event.preventDefault()\n            console.log(this._isQRContent)\n            if (!this._isQRContent) modalContent.innerHTML = qrContent\n            else modalContent.innerHTML = thisContent\n            this._isQRContent = !this._isQRContent\n          })\n        })\n        return true\n      }\n\n      let initialized = false\n      setInterval(async () => {\n        try {\n          while (!initialized) {\n            const showButton = document.getElementById(`show-transaction-button-${transaction.id_transaksi}`)\n            // eslint-disable-next-line no-await-in-loop\n            initialized = await _showTransactionModalInit(showButton)\n          }\n        } catch (error) {\n          // console.log('')\n        }\n      }, 1000)\n\n      return /* html */`<tr class=\"font-bold text-gray-800 mb-5 hover:shadow-lg\">\n      <td class=\"hidden md:table-cell p-5 pr-0 text-gray-500 bg-white rounded-l-lg\">${transactionDate.toUpperCase()}</td>\n      <td class=\"table-cell md:hidden p-5 pr-0 text-gray-500 bg-white rounded-l-lg\">${transactionDateMini.toUpperCase()}</td>\n      <td class=\"bg-white hidden lg:table-cell\">${transaction.nisn}</td>\n      <td class=\"bg-white hidden lg:table-cell ${nominalColor(jenisTransaksi)}\">RP ${transaction.nominal}</td>\n      <td class=\"bg-white select-all\">${transaction.id_transaksi}</td>\n      <td class=\"bg-white hidden lg:table-cell\">${jenisTransaksi}</td>\n      <td class=\"bg-white\">\n        <div class=\"ml-2 md:ml-0 text-sm bg-secondary text-white p-1 md:py-2 md:px-6 rounded-lg w-max\">\n        <p class=\"hidden md:inline\">${transaction.status_transaksi}</p>\n        <p class=\"inline md:hidden\"><svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2.5\" d=\"M5 13l4 4L19 7\"></path></svg></p>\n        </div>\n      </td>\n      <td class=\"bg-white rounded-r-lg justify-end flex p-3 pl-0\">\n        <button class=\"w-8 md:p-2 md:w-12 h-12 text-gray-700\" id=\"settings\">\n          <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n              d=\"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z\">\n            </path>\n          </svg>\n        </button>\n        <div id=\"settings-dropdown\"\n          class=\"hidden absolute mt-10 w-56 rounded-lg shadow-lg bg-white ring-1 ring-black ring-opacity-5\">\n          <div class=\"py-1\" role=\"menu\" aria-orientation=\"vertical\" aria-labelledby=\"options-menu\">\n          <p id=\"reminder-element-${transaction.id_transaksi}\">\n          <button id=\"show-transaction-button-${transaction.id_transaksi}\"\n            class=\"flex w-full flex-1 px-4 py-3 text-sm font-normal text-gray-700 hover:bg-gray-100 hover:text-gray-900\"\n            role=\"menuitem\">\n            <i class=\"text-secondary flex\">\n            <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"></path><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"></path></svg>\n            </i>\n            <p class=\"flex ml-2 leading-relaxed\">Lihat Transaksi</p>\n          </button>\n          <a href=\"#/list/${transaction.nisn}\" class=\"flex w-full flex-1 text-sm font-normal text-gray-700 hover:bg-gray-100 hover:text-gray-900\">\n          <button id=\"show-profile-button-${transaction.id_transaksi}\"\n            class=\"flex w-full px-4 py-3 text-sm font-normal text-gray-700 hover:bg-gray-100 hover:text-gray-900\"\n            role=\"menuitem\">\n            <i class=\"text-secondary flex\">\n            <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"></path></svg>\n            </i>\n            <p class=\"flex ml-2 leading-relaxed\">Lihat Profil Siswa</p>\n          </button>\n          </a>\n          </p>\n          </div>\n        </div>\n      </td>\n    </tr>\n    <tr class=\"h-4\"></tr>`\n    }\n\n    tableBody.innerHTML = `\n    <tr class=\"text-left text-gray-700\">\n    <th class=\"font-normal p-5 pr-0 pt-0\">Tanggal</th>\n    <th class=\"font-normal pb-5 pt-0 hidden lg:table-cell\">NISN Siswa</th>\n    <th class=\"font-normal pb-5 pt-0 hidden lg:table-cell\">Nominal</th>\n    <th class=\"font-normal pb-5 pt-0\">Kode Transaksi</th>\n    <th class=\"font-normal pb-5 pt-0 hidden lg:table-cell\">Jenis</th>\n    <th class=\"font-normal pb-5 pt-0\">Status</th>\n    <th class=\"font-normal pb-5 pt-0 justify-end\"></th>\n  </tr>`\n    transactionData.forEach((transaction) => {\n      tableBody.innerHTML += transactionTemplate(transaction)\n    })\n  },\n}\n\nexport default AdminDashboard\n","/* eslint-disable prefer-destructuring */\n/* eslint-disable new-cap */\n/* eslint-disable max-len */\nimport sortBy from 'lodash/sortBy'\nimport Swal from 'sweetalert2'\nimport APIData from '../../../data/api-data'\nimport StringFormater from '../../../helper/string-formater'\nimport SlugParser from '../../../routes/slugparser'\nimport UrlParser from '../../../routes/urlparser'\n\nconst DataReport = {\n  async render() {\n    return /* html */`\n      <div class=\"p-4 pt-0 md:p-8 md:pt=8 lg:p-12 lg:pt-12 h-full\">\n        <div class=\"flex flex-col h-full mb-20 md:mb-0 md:max-w-screen-md lg:max-w-screen-xl mx-auto\">\n          <div class=\"text-center relative print:hidden\">\n            <a href=\"#/list\" class=\"print:hidden -mt-4 w-max absolute left-0 text-secondary mx-1 p-4\">\n              <svg class=\"w-8 h-8 md:w-10 md:h-10\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"\n                xmlns=\"http://www.w3.org/2000/svg\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\">\n                </path>\n              </svg>\n            </a>\n            <p class=\"print:hidden text-xl leading-8 font-bold tracking-tight text-gray-800 md:text-2xl md:mt-2\">\n              Preview Laporan\n            </p>\n          </div>\n          <div\n            class=\"flex flex-col w-full pt-0 rounded-lg mx-auto md:mt-4 shadow-lg print:shadow-none text-gray-800 mb-24\">\n            <div id=\"report\" class=\"p-8 md:p-12 rounded-lg flex flex-col\">\n              <img class=\"w-56 md:w-64 mb-10\" alt=\"Celenganku Wordmark\" src=\"./images/celenganku-logo.png\">\n              <p id=\"name\" class=\"text-2xl font-bold\"></p>\n              <p id=\"nisn\" class=\"mb-2 text-lg\"></p>\n              <p id=\"alamat\" class=\"text-gray-600\">\n                <p>\n                  <p id=\"periode\" class=\"mt-4 mb-6 text-sm text-primary\"></p>\n                  <div class=\"flex-1 py-0 white rounded-lg\">\n                    <table id=\"transaction-table\" class=\"table-auto w-full\">\n                      <tbody>\n                        <tr class=\"text-left text-gray-700\">\n                          <th class=\"font-normal p-5 pr-0 pt-0\">Tanggal</th>\n                          <th class=\"font-normal pb-5 pt-0 hidden md:table-cell\">Jenis Transaksi</th>\n                          <th class=\"font-normal pb-5 pt-0\">Nominal</th>\n                          <th class=\"font-normal pb-5 pt-0 \">Saldo</th>\n                        </tr>\n                      </tbody>\n                    </table>\n                    <div class=\"preloader p-4 flex mt-auto mb-auto mx-auto justify-center\">\n                      <div class=\"loader loader-mini ease-linear rounded-full border-8 border-t-8 border-gray-200\"></div>\n                    </div>\n                  </div>\n                  <div class=\"text-right mt-4\">\n                    <p id=\"first-balance\" class=\"mb-2 flex\">Saldo Awal:</p>\n                    <p id=\"withdraw-text\" class=\"mb-2 flex\">Pemasukan Saldo:</p>\n                    <p id=\"deposit-text\" class=\"mb-2 flex\">Penarikan Saldo:</p>\n                    <p id=\"last-balance\" class=\"mb-2 flex\">Saldo Akhir:</p>\n                  </div>\n            </div>\n          </div>\n          <div>\n            <button id=\"download-button\" role=\"button\"\n              class=\"hidden fixed w-max bg-secondary text-white p-4 rounded-full right-0 bottom-0 mb-24 mr-8 md:mr-16 md:mb-16 print:hidden\">\n              <svg class=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"\n                xmlns=\"http://www.w3.org/2000/svg\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n                  d=\"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z\">\n                </path>\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n      `\n  },\n\n  async afterRender() {\n    const preloaders = document.querySelectorAll('.preloader')\n    const url = UrlParser.parseActiveUrlWithoutCombiner()\n    this._userId = url.id.split('?')[0]\n    this._reportTime = url.id.split('?')[1]\n\n    const userAccount = await APIData.getAkunSiswa(this._userId)\n    const userData = await APIData.getDataSiswa(this._userId)\n    this._ballance = userAccount.saldo\n\n    // Values\n    this._withdraw = 0\n    this._deposit = 0\n\n    // Elements\n    const nameText = document.getElementById('name')\n    const nisnText = document.getElementById('nisn')\n    const alamatText = document.getElementById('alamat')\n    const periodeText = document.getElementById('periode')\n\n    const firstBalanceText = document.getElementById('first-balance')\n    const lastBalanceText = document.getElementById('last-balance')\n    const withdrawText = document.getElementById('withdraw-text')\n    const depositText = document.getElementById('deposit-text')\n\n    await this._renderTable(this._reportTime)\n    const downloadButton = document.getElementById('download-button')\n    // const reportElement = document.querySelector('#report')\n    downloadButton.addEventListener('click', () => {\n      window.print()\n    })\n\n    nameText.innerHTML = userData.nama\n    nisnText.innerHTML = userData.nisn\n    alamatText.innerHTML = userData.alamat\n\n    const date = new Date()\n    const y = date.getFullYear()\n    const m = date.getMonth()\n    const firstDay = new Date(y, m, 1)\n    const lastDay = new Date(y, m + 1, 0)\n    if (this._reportTime === 'Monthly') periodeText.innerHTML = `Periode: ${firstDay.toLocaleDateString('id-ID')} s/d ${lastDay.toLocaleDateString('id-ID')}`\n    else periodeText.innerHTML = `Periode: 1/1/${y} s/d  31/1/${y}`\n\n    const firstDeposit = document.querySelector('.nominal').textContent.replace('RP ', '')\n    let firstBalance = document.querySelector('.saldo').textContent.replace('RP ', '')\n    firstBalance = StringFormater.convertCasttoInt(firstBalance) - StringFormater.convertCasttoInt(firstDeposit)\n\n    firstBalanceText.innerHTML = `Saldo Awal: <p class=\"flex ml-auto\">RP ${StringFormater.convertToCashFormat(firstBalance)}</p>`\n    depositText.innerHTML = `Pemasukan Saldo: <p class=\"flex ml-auto\">RP ${StringFormater.convertToCashFormat(this._deposit)}</p>`\n    withdrawText.innerHTML = `Penarikan Saldo: <p class=\"flex ml-auto\">RP ${StringFormater.convertToCashFormat(this._withdraw)}</p>`\n    lastBalanceText.innerHTML = `Saldo Akhir: <p class=\"flex ml-auto font-bold text-primary\">${document.querySelectorAll('.saldo')[document.querySelectorAll('.saldo').length - 1].textContent}</p>`\n    preloaders.forEach((preloader) => {\n      preloader.remove()\n    })\n    downloadButton.classList.remove('hidden')\n  },\n  async _renderTable(reportTime) {\n    const tableElement = document.getElementById('transaction-table')\n    const tableBody = tableElement.querySelector('tbody')\n    const unsortedTransactionData = await APIData.getTransaksiSiswa(this._userId)\n\n    const filteredData = unsortedTransactionData.data.filter((transaction) => transaction.status_transaksi === 'SELESAI')\n    const transactionData = sortBy(filteredData, ['tenggat_waktu_pembayaran.seconds']).reverse()\n\n    if (transactionData.length === 0) {\n      Swal.fire({\n        icon: 'error',\n        text: 'Tidak ada transaksi dalam akun ini',\n        title: 'Gagal Menampilkan Laporan',\n        confirmButtonText: 'Tutup',\n        customClass: {\n          popup: 'popup-sweetalert',\n          confirmButton: 'btn-sweetalert bg-secondary',\n        },\n        buttonsStyling: false,\n      })\n      window.location.hash = '#/list'\n    }\n\n    let thisSaldo = this._ballance\n    const transactionTemplate = (transaction) => {\n      Object.keys(transaction).forEach((key) => {\n        if (typeof transaction[key] === 'object') {\n          //\n        } else if (key === 'nominal') {\n          transaction[key] = StringFormater.convertToCashFormat(transaction[key])\n        } else {\n          transaction[key] = transaction[key].toString().toUpperCase()\n        }\n      })\n\n      if (transaction.status_transaksi.toLowerCase() === 'pembayaran') return ''\n\n      const timeStamp = new Date(transaction.tenggat_waktu_pembayaran.seconds * 1000)\n      if (reportTime === 'Monthly') {\n        if (timeStamp.getMonth() !== new Date().getMonth()) return ''\n      }\n      const jenisTransaksi = transaction.jenis_transaksi\n      timeStamp.setDate(timeStamp.getDate() - 1)\n      const transactionDateMini = timeStamp.toLocaleDateString('id-ID')\n\n      const fixedSaldo = thisSaldo\n\n      if (jenisTransaksi.toLowerCase() === 'pemasukan') {\n        thisSaldo -= StringFormater.convertCasttoInt(transaction.nominal)\n        this._withdraw += StringFormater.convertCasttoInt(transaction.nominal)\n      } else {\n        thisSaldo += StringFormater.convertCasttoInt(transaction.nominal)\n        this._deposit += StringFormater.convertCasttoInt(transaction.nominal)\n      }\n\n      const nominalColor = (jenis) => {\n        if (jenis.toLowerCase() === 'pemasukan') return 'text-success'\n        return 'text-failed'\n      }\n\n      return /* html */`<tr class=\"font-bold text-gray-800 mb-5\">\n      <td class=\"p-5 pr-0 text-gray-500 bg-gray-200 rounded-l-lg\">${transactionDateMini.toUpperCase()}</td>\n      <td class=\"bg-gray-200 hidden md:table-cell\">${transaction.jenis_transaksi}</td>\n      <td class=\"nominal bg-gray-200 ${nominalColor(transaction.jenis_transaksi)}\">RP ${transaction.nominal}</td>\n      <td class=\"saldo bg-gray-200 rounded-r-lg\">RP ${StringFormater.convertToCashFormat(fixedSaldo)}</td>\n      </td>\n    </tr>\n    <tr class=\"h-4\"></tr>`\n    }\n\n    tableBody.innerHTML = `\n    <tr class=\"text-left text-gray-700\">\n      <th class=\"font-normal p-5 pr-0 pt-0\">Tanggal</th>\n      <th class=\"font-normal pb-5 pt-0 hidden md:table-cell\">Jenis Transaksi</th>\n      <th class=\"font-normal pb-5 pt-0\">Nominal</th>\n      <th class=\"font-normal pb-5 pt-0 \">Saldo</th>\n    </tr>`\n    const transactionElementArray = []\n    let transactionRowTemplate = []\n    transactionData.forEach((transaction) => {\n      transactionElementArray.push(transactionTemplate(transaction))\n    })\n    transactionRowTemplate = transactionElementArray.reverse()\n    tableBody.innerHTML += transactionRowTemplate.join('')\n  },\n}\n\nexport default DataReport\n"],"sourceRoot":""}