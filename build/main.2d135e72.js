(self["webpackChunkcelenganku_app"]=self["webpackChunkcelenganku_app"]||[]).push([[302],{9993:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var a=n(2627);var r=n(7511);var s=n.n(r);var o=n(538);var l=n.n(o);var i=n(5395);var d=n(9907);var c=n(7504);var u=n(3711);var m=n(4115);var p=n(2502);var f=n(5978);function g(e){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){g=function e(t){return typeof t}}else{g=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return g(e)}function x(e,t,n,a,r,s,o){try{var l=e[s](o);var i=l.value}catch(e){n(e);return}if(l.done){t(i)}else{Promise.resolve(i).then(a,r)}}function v(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){x(s,a,r,o,l,"next",e)}function l(e){x(s,a,r,o,l,"throw",e)}o(undefined)}))}}a.Z.WORKER_PATH=i.Z;var b={render:function e(){return v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function e(t){while(1){switch(t.prev=t.next){case 0:return t.abrupt("return",'\n    <div class="p-4 pt-0 md:p-8 md:pt=8 lg:p-12 lg:pt-12 h-full">\n    <div class="flex flex-col h-full mb-20 md:mb-0 md:max-w-screen-md lg:max-w-screen-xl mx-auto">\n      <div class="text-center">\n        <p class="text-xl leading-8 font-bold tracking-tight text-gray-800 md:text-2xl md:mt-2">\n          Celenganku<i class="text-secondary not-italic">admin</i>\n        </p>\n      </div>\n\n      <div class="flex flex-col">\n        <div class="bg-gray-200 gap-4 p-5 rounded-lg flex flex-wrap flex-col mt-4 md:p-8 md:gap-8 md:mt-6 md:flex-row">\n          <div class="flex p-5 md:w-1/3 bg-secondary rounded-lg shadow-lg">\n            <div class="flex flex-1 items-center">\n            <div class="preloader p-4 flex mt-auto mb-auto mx-auto justify-center">\n              <div class="loader admin loader-mini ease-linear rounded-full border-8 border-t-8 border-gray-200"></div>\n            </div>\n              <div id="process-report-card" class="hidden flex flex-col flex-1">\n                <p class="-mb-2 text-white">Proses Transaksi Bulan ini</p>\n                <p id="monthly-process" class="text-white text-4xl md:text-2xl lg:text-4xl font-bold">124</p>\n                <p class="-mb-1 mt-3 text-white">Proses Transaksi Minggu ini</p>\n                <p id="weekly-process" class="text-white text-xl md:text-lg lg:text-xl font-bold">5</p>\n              </div>\n            </div>\n          </div>\n          <div class="flex flex-1 p-5 bg-white rounded-lg shadow-lg">\n            <div class="flex flex-1 items-center">\n\n              <div id="process-card" class="flex flex-col flex-1 w-fill">\n                <p class="mb-4 text-lg text-gray-600">Proses Transaksi</p>\n                <p class="mb-2 text-gray-800 font-semibold">Kode Transaksi</p>\n                <div class="flex flex-col md:flex-row mb-4">\n                <div class="flex flex-1 flex-col">\n                <input id="transaction-code" name="Kode Transaksi" data-rule="required no-space number-must-10" value=""\n                  class="flex flex-1 px-5 py-3 rounded-lg w-full bg-gray-200 text-gray-800">\n                </div>\n                  <div class="flex mt-4 md:mt-0">\n                      <button role="button" disabled id="process-transaction"\n                      class="w-max bg-secondary text-white mx-1 md:ml-4 py-3 px-8 rounded-lg disabled:opacity-50 disabled:cursor-default">Proses</button>\n                      <button role="button" id="scan-qr-button" class="hidden md:block w-max text-secondary mx-1 font-light p-2">\n                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path></svg></button>\n                  </div>\n                </div>\n                  </div>\n            </div>\n          </div>\n        </div>\n        <p class="mt-6 text-xl text-center md:text-left">Riwayat Proses Transaksi</p>\n        <div class="bg-gray-200 p-5 rounded-lg flex flex-col mt-6 md:p-8">\n          <div class="flex-1 py-0 white rounded-lg">\n            <table id="transaction-table" class="table-auto w-full">\n              <tbody>\n                <tr class="text-left text-gray-700">\n                  <th class="font-normal p-5 pr-0 pt-0">Tanggal</th>\n                  <th class="font-normal pb-5 pt-0 hidden lg:table-cell">NISN Siswa</th>\n                  <th class="font-normal pb-5 pt-0 hidden lg:table-cell">Nominal</th>\n                  <th class="font-normal pb-5 pt-0">Kode Transaksi</th>\n                  <th class="font-normal pb-5 pt-0 hidden lg:table-cell">Jenis</th>\n                  <th class="font-normal pb-5 pt-0">Status</th>\n                  <th class="font-normal pb-5 pt-0 justify-end"></th>\n                </tr>\n              </tbody>\n            </table>\n            <div class="preloader p-4 flex mt-auto mb-auto mx-auto justify-center">\n              <div class="loader admin loader-mini ease-linear rounded-full border-8 border-t-8 border-gray-200"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n        ');case 1:case"end":return t.stop()}}}),e)})))()},afterRender:function e(){var t=this;return v(regeneratorRuntime.mark((function e(){var n,r,s,o,l,i,c,m;return regeneratorRuntime.wrap((function e(f){while(1){switch(f.prev=f.next){case 0:n=document.querySelectorAll(".preloader");r=document.getElementById("process-report-card");s=document.getElementById("monthly-process");o=document.getElementById("weekly-process");t._monthly=0;t._weekly=0;f.next=8;return d.Z.retrieveUser();case 8:l=f.sent;t._adminId=l.id;f.next=12;return t._renderTable();case 12:i=document.getElementById("transaction-code");c=document.getElementById("process-transaction");p.Z.init({formInputs:i,submitButton:c});m=document.getElementById("scan-qr-button");m.addEventListener("click",(function(){u.Z.init({title:"Scan QR",content:'<div class="px-10 py-6">\n          <div id="modal-content">\n            <div id="video-container" class="flex flex-row relative">\n              <video class="w-full" id="scanner-preview"></video>\n            </div>\n          </div>\n          <div class="flex justify-end items-center w-100 mt-4">\n            <button role="button" data-modal="Scan QR" class="w-max bg-secondary text-white mx-1 py-3 px-8 rounded-lg disabled:opacity-50">Tutup</button>\n          </div>\n        </div>',bg:"bg-secondary"});try{var e=document.getElementById("scanner-preview");var n=document.getElementById("modal-scan-qr");var r=document.getElementById("video-container");var s=new a.Z(e,function(){var e=v(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function e(r){while(1){switch(r.prev=r.next){case 0:console.log("decoded qr code:",a);r.next=3;return t._processTransaction(a);case 3:s.stop();n.remove();case 5:case"end":return r.stop()}}}),e)})));return function(t){return e.apply(this,arguments)}}());r.appendChild(s.$canvas);e.style.paddingTop="50%";s.$canvas.className="absolute w-full h-full";s.start();window.scanner=s}catch(e){console.log("error: ".concat(e))}}));c.addEventListener("click",v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function e(n){while(1){switch(n.prev=n.next){case 0:n.next=2;return t._processTransaction(i.value);case 2:case"end":return n.stop()}}}),e)}))));s.innerHTML=t._monthly;o.innerHTML=t._weekly;r.classList.remove("hidden");n.forEach((function(e){e.remove()}));case 22:case"end":return f.stop()}}}),e)})))()},_processTransaction:function e(t){var n=this;return v(regeneratorRuntime.mark((function e(){var a,r,s,o,i;return regeneratorRuntime.wrap((function e(p){while(1){switch(p.prev=p.next){case 0:p.next=2;return d.Z.getTransaction(t);case 2:a=p.sent;console.log(a);if(a.error){l().fire({icon:"error",text:"Kode Transaksi tidak valid",title:"Proses Transaksi Gagal",confirmButtonText:"Tutup",customClass:{popup:"popup-sweetalert",confirmButton:"btn-sweetalert bg-secondary"},buttonsStyling:false})}else if(a.status_transaksi==="selesai"){l().fire({icon:"error",text:"Transaksi ini sudah selesai diproses",title:"Proses Transaksi Gagal",confirmButtonText:"Tutup",customClass:{popup:"popup-sweetalert",confirmButton:"btn-sweetalert bg-secondary"},buttonsStyling:false})}else if(a.metode_pembayaran==="daring"){l().fire({icon:"error",text:"Transaksi ini dibuat dengan metode pembayaran daring",title:"Proses Transaksi Gagal",confirmButtonText:"Tutup",customClass:{popup:"popup-sweetalert",confirmButton:"btn-sweetalert bg-secondary"},buttonsStyling:false})}else{u.Z.init({title:"Transaksi",content:'<div class="px-10 py-6">\n          <div id="modal-content">\n            <p class="mt-2 mb-1">Kode Transaksi</p>\n            <div class="flex flex-row">\n              <p id="id-transaksi" class="my-2 text-3xl select-all font-bold">'.concat(a.id_transaksi,'</p>\n              <button role="button" id="copy-button" class="w-max text-secondary ml-2 font-light p-2">\n              <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path></svg>\n              </button>\n            </div>\n            <p class="mb-2 text-gray-800">NISN</p>\n            <input name="NISN" disabled value="').concat(a.nisn,'"\n              class="mb-2 block px-5 py-3 rounded-lg w-full bg-gray-200 text-gray-500">\n              <p class="mb-2 text-gray-800">Nominal</p>\n            <input name="NISN" disabled value="RP ').concat(c.Z.convertToCashFormat(a.nominal),'"\n              class="mb-2 block px-5 py-3 rounded-lg w-full bg-gray-200 text-gray-500">\n            <div class="flex flex-col md:flex-row md:gap-4">\n              <div class="flex flex-1 flex-col">\n              <p class="mb-2 text-gray-800">Jenis Transaksi</p>\n              <input name="NISN" disabled value="').concat(a.jenis_transaksi.toUpperCase(),'"\n                class="mb-2 block px-5 py-3 rounded-lg w-full bg-gray-200 text-gray-500">\n              </div>\n              <div class="flex flex-1 flex-col">\n              <p class="mb-2 text-gray-800">Metode Pembayaran</p>\n                <input name="NISN" disabled value="').concat(a.metode_pembayaran.toUpperCase(),'"\n                  class="mb-2 block px-5 py-3 rounded-lg w-full bg-gray-200 text-gray-500">\n              </div>\n            </div>\n          </div>\n          <div class="flex justify-end items-center w-100 mt-4">\n            <button role="button" id="process-button" class="w-max bg-secondary text-white mx-1 py-3 px-8 rounded-lg disabled:opacity-50">Proses Transaksi</button>\n          </div>\n        </div>'),bg:"bg-secondary"});r=document.getElementById("modal-transaksi");s=document.getElementById("process-button");o=document.getElementById("copy-button");i=document.getElementById("id-transaksi");o.addEventListener("click",(function(){m.Z.copyTextToClipboard(a.id_transaksi);i.focus()}));s.addEventListener("click",function(){var e=v(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function e(o){while(1){switch(o.prev=o.next){case 0:t.preventDefault();o.next=3;return l().fire({icon:"warning",text:"Tekan pilihan untuk mengkonfirmasi",title:"Konfirmasi Pembayaran?",showCancelButton:true,confirmButtonText:"Konfirmasi",cancelButtonText:"Jangan",showLoaderOnConfirm:true,preConfirm:function(){var e=v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function e(t){while(1){switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return d.Z.updateTransaction(a.id_transaksi,{id_admin:n._adminId,status_transaksi:"selesai"});case 3:t.next=8;break;case 5:t.prev=5;t.t0=t["catch"](0);l().showValidationMessage("Request failed: ".concat(t.t0));case 8:case"end":return t.stop()}}}),e,null,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}(),customClass:{popup:"popup-sweetalert",confirmButton:"btn-sweetalert bg-success",cancelButton:"btn-sweetalert bg-failed"},buttonsStyling:false});case 3:s=o.sent;if(!s.isConfirmed){o.next=9;break}o.next=7;return d.Z.updateSaldo(a.nisn,a.nominal,a.jenis_transaksi);case 7:r.remove();n._renderTable();case 9:case"end":return o.stop()}}}),e)})));return function(t){return e.apply(this,arguments)}}())}case 5:case"end":return p.stop()}}}),e)})))()},_renderTable:function e(){var t=this;return v(regeneratorRuntime.mark((function e(){var n,a,r,o,l;return regeneratorRuntime.wrap((function e(i){while(1){switch(i.prev=i.next){case 0:n=document.getElementById("transaction-table");a=n.querySelector("tbody");i.next=4;return d.Z.getTransaksiAdmin(t._adminId);case 4:r=i.sent;o=s()(r.data,["tenggat_waktu_pembayaran.seconds"]).reverse();l=function e(n){Object.keys(n).forEach((function(e){if(g(n[e])==="object"){}else if(e==="nominal"){n[e]=c.Z.convertToCashFormat(n[e])}else{n[e]=n[e].toString().toUpperCase()}}));var a=new Date(n.tenggat_waktu_pembayaran.seconds*1e3);var r=n.jenis_transaksi;var s=new Date;s.setDate(a.getDate());a.setDate(a.getDate()-1);var o=a.toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"});var l=a.toLocaleDateString("id-ID");if(a.getMonth()===(new Date).getMonth()){t._monthly++;if(f.Z.isDateInThisWeek(a)){t._weekly++}}var i=function e(t){if(t.toLowerCase()==="pemasukan")return"text-success";return"text-failed"};var p=function(){var e=v(regeneratorRuntime.mark((function e(a){var r;return regeneratorRuntime.wrap((function e(s){while(1){switch(s.prev=s.next){case 0:s.next=2;return d.Z.getDataSiswa(n.nisn);case 2:r=s.sent;a.addEventListener("click",(function(){u.Z.init({title:"Transaksi",content:'<div class="px-10 py-6">\n              <div id="modal-content">\n                <p class="mt-2 mb-1">Kode Transaksi kamu adalah</p>\n                <div class="flex flex-row">\n                  <p id="id-transaksi" class="my-2 text-3xl select-all font-bold">'.concat(n.id_transaksi,'</p>\n                  <button role="button" id="copy-button" class="w-max text-secondary ml-2 font-light p-2">\n                  <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path></svg>\n                  </button>\n                </div>\n                <p class="mb-2 text-gray-800">Nama Siswa</p>\n                <input name="NISN" disabled value="').concat(r.nama," (").concat(n.nisn,')"\n                  class="mb-2 block px-5 py-3 rounded-lg w-full bg-gray-200 text-gray-500">\n                  <p class="mb-2 text-gray-800">Nominal</p>\n                <input name="Nominal" disabled value="RP ').concat(n.nominal,'"\n                  class="mb-2 block px-5 py-3 rounded-lg w-full bg-gray-200 text-gray-500">\n                <div class="flex flex-col md:flex-row md:gap-4">\n                  <div class="flex flex-1 flex-col">\n                  <p class="mb-2 text-gray-800">Jenis Transaksi</p>\n                  <input name="Jenis Transaksi" disabled value="').concat(n.jenis_transaksi,'"\n                    class="mb-2 block px-5 py-3 rounded-lg w-full bg-gray-200 text-gray-500">\n                  </div>\n                  <div class="flex flex-1 flex-col">\n                  <p class="mb-2 text-gray-800">Metode Pembayaran</p>\n                    <input name="Metode Pembayaran" disabled value="').concat(n.metode_pembayaran,'"\n                      class="mb-2 block px-5 py-3 rounded-lg w-full bg-gray-200 text-gray-500">\n                  </div>\n                </div>\n              </div>\n              <div class="flex justify-end items-center w-100 mt-4">\n                <button role="button" data-modal="Transaksi" class="w-max bg-secondary text-white mx-1 py-3 px-8 rounded-lg disabled:opacity-50">Tutup</button>\n              </div>\n            </div>'),bg:"bg-secondary"});var e=document.getElementById("modal-content");var a=e.innerHTML;var s='<img class="mx-auto" src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data='.concat(n.id_transaksi,'"></img>');var o=document.getElementById("show-qr-button");var l=document.getElementById("copy-button");var i=document.getElementById("id-transaksi");t._isQRContent=false;l.addEventListener("click",(function(){m.Z.copyTextToClipboard(n.id_transaksi);i.focus()}));o.addEventListener("click",(function(n){n.preventDefault();console.log(t._isQRContent);if(!t._isQRContent)e.innerHTML=s;else e.innerHTML=a;t._isQRContent=!t._isQRContent}))}));return s.abrupt("return",true);case 5:case"end":return s.stop()}}}),e)})));return function t(n){return e.apply(this,arguments)}}();var x=false;setInterval(v(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function e(a){while(1){switch(a.prev=a.next){case 0:a.prev=0;case 1:if(x){a.next=8;break}t=document.getElementById("show-transaction-button-".concat(n.id_transaksi));a.next=5;return p(t);case 5:x=a.sent;a.next=1;break;case 8:a.next=12;break;case 10:a.prev=10;a.t0=a["catch"](0);case 12:case"end":return a.stop()}}}),e,null,[[0,10]])}))),1e3);return'<tr class="font-bold text-gray-800 mb-5 hover:shadow-lg">\n      <td class="hidden md:table-cell p-5 pr-0 text-gray-500 bg-white rounded-l-lg">'.concat(o.toUpperCase(),'</td>\n      <td class="table-cell md:hidden p-5 pr-0 text-gray-500 bg-white rounded-l-lg">').concat(l.toUpperCase(),'</td>\n      <td class="bg-white hidden lg:table-cell">').concat(n.nisn,'</td>\n      <td class="bg-white hidden lg:table-cell ').concat(i(r),'">RP ').concat(n.nominal,'</td>\n      <td class="bg-white select-all">').concat(n.id_transaksi,'</td>\n      <td class="bg-white hidden lg:table-cell">').concat(r,'</td>\n      <td class="bg-white">\n        <div class="ml-2 md:ml-0 text-sm bg-secondary text-white p-1 md:py-2 md:px-6 rounded-lg w-max">\n        <p class="hidden md:inline">').concat(n.status_transaksi,'</p>\n        <p class="inline md:hidden"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path></svg></p>\n        </div>\n      </td>\n      <td class="bg-white rounded-r-lg justify-end flex p-3 pl-0">\n        <button class="w-8 md:p-2 md:w-12 h-12 text-gray-700" id="settings">\n          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\n              d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z">\n            </path>\n          </svg>\n        </button>\n        <div id="settings-dropdown"\n          class="hidden absolute mt-10 w-56 rounded-lg shadow-lg bg-white ring-1 ring-black ring-opacity-5">\n          <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="options-menu">\n          <p id="reminder-element-').concat(n.id_transaksi,'">\n          <button id="show-transaction-button-').concat(n.id_transaksi,'"\n            class="flex w-full flex-1 px-4 py-3 text-sm font-normal text-gray-700 hover:bg-gray-100 hover:text-gray-900"\n            role="menuitem">\n            <i class="text-secondary flex">\n            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>\n            </i>\n            <p class="flex ml-2 leading-relaxed">Lihat Transaksi</p>\n          </button>\n          <a href="#/list/').concat(n.nisn,'" class="flex w-full flex-1 text-sm font-normal text-gray-700 hover:bg-gray-100 hover:text-gray-900">\n          <button id="show-profile-button-').concat(n.id_transaksi,'"\n            class="flex w-full px-4 py-3 text-sm font-normal text-gray-700 hover:bg-gray-100 hover:text-gray-900"\n            role="menuitem">\n            <i class="text-secondary flex">\n            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>\n            </i>\n            <p class="flex ml-2 leading-relaxed">Lihat Profil Siswa</p>\n          </button>\n          </a>\n          </p>\n          </div>\n        </div>\n      </td>\n    </tr>\n    <tr class="h-4"></tr>')};a.innerHTML='\n    <tr class="text-left text-gray-700">\n    <th class="font-normal p-5 pr-0 pt-0">Tanggal</th>\n    <th class="font-normal pb-5 pt-0 hidden lg:table-cell">NISN Siswa</th>\n    <th class="font-normal pb-5 pt-0 hidden lg:table-cell">Nominal</th>\n    <th class="font-normal pb-5 pt-0">Kode Transaksi</th>\n    <th class="font-normal pb-5 pt-0 hidden lg:table-cell">Jenis</th>\n    <th class="font-normal pb-5 pt-0">Status</th>\n    <th class="font-normal pb-5 pt-0 justify-end"></th>\n  </tr>';o.forEach((function(e){a.innerHTML+=l(e)}));case 9:case"end":return i.stop()}}}),e)})))()}};const h=b},4755:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var a=n(7511);var r=n.n(a);var s=n(538);var o=n.n(s);var l=n(9907);var i=n(7504);var d=n(7902);var c=n(557);function u(e){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){u=function e(t){return typeof t}}else{u=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return u(e)}function m(e,t,n,a,r,s,o){try{var l=e[s](o);var i=l.value}catch(e){n(e);return}if(l.done){t(i)}else{Promise.resolve(i).then(a,r)}}function p(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){m(s,a,r,o,l,"next",e)}function l(e){m(s,a,r,o,l,"throw",e)}o(undefined)}))}}var f={render:function e(){return p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function e(t){while(1){switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <div class="p-4 pt-0 md:p-8 md:pt=8 lg:p-12 lg:pt-12 h-full">\n        <div class="flex flex-col h-full mb-20 md:mb-0 md:max-w-screen-md lg:max-w-screen-xl mx-auto">\n          <div class="text-center relative print:hidden">\n            <a href="#/list" class="print:hidden -mt-4 w-max absolute left-0 text-secondary mx-1 p-4">\n              <svg class="w-8 h-8 md:w-10 md:h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"\n                xmlns="http://www.w3.org/2000/svg">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18">\n                </path>\n              </svg>\n            </a>\n            <p class="print:hidden text-xl leading-8 font-bold tracking-tight text-gray-800 md:text-2xl md:mt-2">\n              Preview Laporan\n            </p>\n          </div>\n          <div\n            class="flex flex-col w-full pt-0 rounded-lg mx-auto md:mt-4 shadow-lg print:shadow-none text-gray-800 mb-24">\n            <div id="report" class="p-8 md:p-12 rounded-lg flex flex-col">\n              <img class="w-56 md:w-64 mb-10" alt="Celenganku Wordmark" src="./images/celenganku-logo.png">\n              <p id="name" class="text-2xl font-bold"></p>\n              <p id="nisn" class="mb-2 text-lg"></p>\n              <p id="alamat" class="text-gray-600">\n                <p>\n                  <p id="periode" class="mt-4 mb-6 text-sm text-primary"></p>\n                  <div class="flex-1 py-0 white rounded-lg">\n                    <table id="transaction-table" class="table-auto w-full">\n                      <tbody>\n                        <tr class="text-left text-gray-700">\n                          <th class="font-normal p-5 pr-0 pt-0">Tanggal</th>\n                          <th class="font-normal pb-5 pt-0 hidden md:table-cell">Jenis Transaksi</th>\n                          <th class="font-normal pb-5 pt-0">Nominal</th>\n                          <th class="font-normal pb-5 pt-0 ">Saldo</th>\n                        </tr>\n                      </tbody>\n                    </table>\n                    <div class="preloader p-4 flex mt-auto mb-auto mx-auto justify-center">\n                      <div class="loader loader-mini ease-linear rounded-full border-8 border-t-8 border-gray-200"></div>\n                    </div>\n                  </div>\n                  <div class="text-right mt-4">\n                    <p id="first-balance" class="mb-2 flex">Saldo Awal:</p>\n                    <p id="withdraw-text" class="mb-2 flex">Pemasukan Saldo:</p>\n                    <p id="deposit-text" class="mb-2 flex">Penarikan Saldo:</p>\n                    <p id="last-balance" class="mb-2 flex">Saldo Akhir:</p>\n                  </div>\n            </div>\n          </div>\n          <div>\n            <button id="download-button" role="button"\n              class="hidden fixed w-max bg-secondary text-white p-4 rounded-full right-0 bottom-0 mb-24 mr-8 md:mr-16 md:mb-16 print:hidden">\n              <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"\n                xmlns="http://www.w3.org/2000/svg">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\n                  d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z">\n                </path>\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n      ');case 1:case"end":return t.stop()}}}),e)})))()},afterRender:function e(){var t=this;return p(regeneratorRuntime.mark((function e(){var n,a,r,s,o,d,u,m,p,f,g,x,v,b,h,w,y,k,T,_;return regeneratorRuntime.wrap((function e(S){while(1){switch(S.prev=S.next){case 0:n=document.querySelectorAll(".preloader");a=c.Z.parseActiveUrlWithoutCombiner();t._userId=a.id.split("?")[0];t._reportTime=a.id.split("?")[1];S.next=6;return l.Z.getAkunSiswa(t._userId);case 6:r=S.sent;S.next=9;return l.Z.getDataSiswa(t._userId);case 9:s=S.sent;t._ballance=r.saldo;t._withdraw=0;t._deposit=0;o=document.getElementById("name");d=document.getElementById("nisn");u=document.getElementById("alamat");m=document.getElementById("periode");p=document.getElementById("first-balance");f=document.getElementById("last-balance");g=document.getElementById("withdraw-text");x=document.getElementById("deposit-text");S.next=23;return t._renderTable(t._reportTime);case 23:v=document.getElementById("download-button");v.addEventListener("click",(function(){window.print()}));o.innerHTML=s.nama;d.innerHTML=s.nisn;u.innerHTML=s.alamat;b=new Date;h=b.getFullYear();w=b.getMonth();y=new Date(h,w,1);k=new Date(h,w+1,0);if(t._reportTime==="Monthly")m.innerHTML="Periode: ".concat(y.toLocaleDateString("id-ID")," s/d ").concat(k.toLocaleDateString("id-ID"));else m.innerHTML="Periode: 1/1/".concat(h," s/d  31/1/").concat(h);T=document.querySelector(".nominal").textContent.replace("RP ","");_=document.querySelector(".saldo").textContent.replace("RP ","");_=i.Z.convertCasttoInt(_)-i.Z.convertCasttoInt(T);p.innerHTML='Saldo Awal: <p class="flex ml-auto">RP '.concat(i.Z.convertToCashFormat(_),"</p>");x.innerHTML='Pemasukan Saldo: <p class="flex ml-auto">RP '.concat(i.Z.convertToCashFormat(t._deposit),"</p>");g.innerHTML='Penarikan Saldo: <p class="flex ml-auto">RP '.concat(i.Z.convertToCashFormat(t._withdraw),"</p>");f.innerHTML='Saldo Akhir: <p class="flex ml-auto font-bold text-primary">'.concat(document.querySelectorAll(".saldo")[document.querySelectorAll(".saldo").length-1].textContent,"</p>");n.forEach((function(e){e.remove()}));v.classList.remove("hidden");case 43:case"end":return S.stop()}}}),e)})))()},_renderTable:function e(t){var n=this;return p(regeneratorRuntime.mark((function e(){var a,s,d,c,m,p,f,g;return regeneratorRuntime.wrap((function e(x){while(1){switch(x.prev=x.next){case 0:a=document.getElementById("transaction-table");s=a.querySelector("tbody");x.next=4;return l.Z.getTransaksiSiswa(n._userId);case 4:d=x.sent;c=r()(d.data,["tenggat_waktu_pembayaran.seconds"]).reverse();if(c.length===0){o().fire({icon:"error",text:"Tidak ada transaksi dalam akun ini",title:"Gagal Menampilkan Laporan",confirmButtonText:"Tutup",customClass:{popup:"popup-sweetalert",confirmButton:"btn-sweetalert bg-secondary"},buttonsStyling:false});window.location.hash="#/list"}m=n._ballance;p=function e(a){Object.keys(a).forEach((function(e){if(u(a[e])==="object"){}else if(e==="nominal"){a[e]=i.Z.convertToCashFormat(a[e])}else{a[e]=a[e].toString().toUpperCase()}}));if(a.status_transaksi.toLowerCase()==="pembayaran")return"";var r=new Date(a.tenggat_waktu_pembayaran.seconds*1e3);if(t==="Monthly"){if(r.getMonth()!==(new Date).getMonth())return""}var s=a.jenis_transaksi;r.setDate(r.getDate()-1);var o=r.toLocaleDateString("id-ID");var l=m;if(s.toLowerCase()==="pemasukan"){m-=i.Z.convertCasttoInt(a.nominal);n._withdraw+=i.Z.convertCasttoInt(a.nominal)}else{m+=i.Z.convertCasttoInt(a.nominal);n._deposit+=i.Z.convertCasttoInt(a.nominal)}var d=function e(t){if(t.toLowerCase()==="pemasukan")return"text-success";return"text-failed"};return'<tr class="font-bold text-gray-800 mb-5">\n      <td class="p-5 pr-0 text-gray-500 bg-gray-200 rounded-l-lg">'.concat(o.toUpperCase(),'</td>\n      <td class="bg-gray-200 hidden md:table-cell">').concat(a.jenis_transaksi,'</td>\n      <td class="nominal bg-gray-200 ').concat(d(a.jenis_transaksi),'">RP ').concat(a.nominal,'</td>\n      <td class="saldo bg-gray-200 rounded-r-lg">RP ').concat(i.Z.convertToCashFormat(l),'</td>\n      </td>\n    </tr>\n    <tr class="h-4"></tr>')};s.innerHTML='\n    <tr class="text-left text-gray-700">\n      <th class="font-normal p-5 pr-0 pt-0">Tanggal</th>\n      <th class="font-normal pb-5 pt-0 hidden md:table-cell">Jenis Transaksi</th>\n      <th class="font-normal pb-5 pt-0">Nominal</th>\n      <th class="font-normal pb-5 pt-0 ">Saldo</th>\n    </tr>';f=[];g=[];c.forEach((function(e){f.push(p(e))}));g=f.reverse();s.innerHTML+=g.join("");case 15:case"end":return x.stop()}}}),e)})))()}};const g=f}}]);
//# sourceMappingURL=main.2d135e72.js.map