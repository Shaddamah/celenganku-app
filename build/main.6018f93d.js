(self["webpackChunkcelenganku_app"]=self["webpackChunkcelenganku_app"]||[]).push([[959],{6315:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var a=n(7511);var r=n.n(a);var o=n(538);var l=n.n(o);var i=n(7504);var s=n(5978);var d=n(3078);var c=n(3711);var u=n(4115);function m(e){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){m=function e(t){return typeof t}}else{m=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return m(e)}function p(e,t,n,a,r,o,l){try{var i=e[o](l);var s=i.value}catch(e){n(e);return}if(i.done){t(s)}else{Promise.resolve(s).then(a,r)}}function f(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function l(e){p(o,a,r,l,i,"next",e)}function i(e){p(o,a,r,l,i,"throw",e)}l(undefined)}))}}var h={render:function e(){return f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function e(t){while(1){switch(t.prev=t.next){case 0:return t.abrupt("return",'\n        <div class="text-center">\n          <p class="text-xl leading-8 font-bold tracking-tight text-gray-800 md:text-2xl md:mt-2">\n            Celenganku\n          </p>\n        </div>\n\n        <div class="flex flex-col">\n          <div\n            class="bg-gray-200 gap-4 p-5 rounded-lg flex flex-wrap flex-col mt-4 md:p-8 md:gap-8 md:mt-6 md:flex-row">\n            <div class="flex-grow-1 flex-auto lg:flex-1 p-5 bg-primary rounded-lg shadow-primary">\n              <div class="flex items-center">\n\n                <div class="preloader p-4 flex mt-auto mb-auto ml-auto mr-auto">\n                  <div class="loader loader-mini ease-linear rounded-full border-8 border-t-8 border-gray-200"></div>\n                </div>\n\n                <div id="balance-card" class="hidden text-white flex flex-col flex-1">\n                  <p class="-mb-2">Saldo</p>\n                  <p id="bal" class="text-4xl md:text-2xl lg:text-4xl font-bold">Rp</p>\n                  <div class="flex flex-row gap-2 mt-4">\n                    <a href="#/transaction" class="w-10 h-10 p-1 bg-primaryLight text-primary font-light rounded-lg">\n                      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\n                          d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>\n                      </svg>\n                    </a>\n                    <a href="#/report" class="w-10 h-10 p-1 bg-primaryLight text-primary font-light rounded-lg">\n                      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\n                          d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">\n                        </path>\n                      </svg>\n                    </a>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class="flex-grow-1 flex-auto lg:flex-1 p-5 bg-white rounded-lg shadow-lg">\n              <div class="flex items-center">\n\n                <div class="preloader p-4 flex mt-auto mb-auto ml-auto mr-auto">\n                  <div class="loader loader-mini ease-linear rounded-full border-8 border-t-8 border-gray-200"></div>\n                </div>\n\n                <div id="deposit-card" class="hidden flex flex-col flex-1">\n                  <p class="-mb-2 text-gray-700">Pemasukan Bulan ini</p>\n                  <p id="monthly-withdraw" class="text-gray-800 text-4xl md:text-2xl lg:text-4xl font-bold">Rp 800.000</p>\n                  <p id="weekly-withdraw" class="font-bold text-sm text-gray-400 mt-3" href="">RP 100.000 MINGGU INI</p>\n                </div>\n              </div>\n            </div>\n            <div class="flex-grow-1 flex-auto lg:flex-1 p-5 bg-white rounded-lg shadow-lg">\n              <div class="flex items-center">\n\n                <div class="preloader p-4 flex mt-auto mb-auto ml-auto mr-auto">\n                  <div class="loader loader-mini ease-linear rounded-full border-8 border-t-8 border-gray-200"></div>\n                </div>\n\n                <div id="withdraw-card" class="hidden flex flex-col flex-1">\n                  <p class="-mb-2 text-gray-700">Penarikan Bulan ini</p>\n                  <p id="monthly-deposit" class="text-gray-800 text-4xl md:text-2xl lg:text-4xl font-bold">Rp 80.000</p>\n                  <p id="weekly-deposit" class="font-bold text-sm text-gray-400 mt-3" href="">RP 100.000 MINGGU INI</p>\n                </div>\n              </div>\n            </div>\n          </div>\n          <p class="mt-6 text-xl text-center md:text-left">Riwayat Transaksi</p>\n          <div class="bg-gray-200 p-5 rounded-lg flex flex-col mt-6 md:p-8">\n            <div class="flex-1 py-0 white rounded-lg">\n              <table id="transaction-table" class="table-auto w-full">\n                <tbody>\n                <tr class="text-left text-gray-700">\n                    <th class="font-normal p-5 pr-0 pt-0">Tanggal</th>\n                    <th class="font-normal pb-5 pt-0 hidden lg:table-cell">ID Transaksi</th>\n                    <th class="font-normal pb-5 pt-0">Nominal</th>\n                    <th class="font-normal pb-5 pt-0 hidden lg:table-cell">Metode</th>\n                    <th class="font-normal pb-5 pt-0 hidden lg:table-cell">Jenis</th>\n                    <th class="font-normal pb-5 pt-0">Status</th>\n                    <th class="font-normal pb-5 pt-0 justify-end"></th>\n                  </tr>\n                </tbody>\n              </table>\n              <div class="preloader p-4 flex mt-auto mb-auto mx-auto justify-center">\n                <div class="loader loader-mini ease-linear rounded-full border-8 border-t-8 border-gray-200"></div>\n              </div>\n            </div>\n          </div>\n      ');case 1:case"end":return t.stop()}}}),e)})))()},afterRender:function e(){var t=this;return f(regeneratorRuntime.mark((function e(){var n,a,r,o,l,s,c,u,m,p,f;return regeneratorRuntime.wrap((function e(h){while(1){switch(h.prev=h.next){case 0:n=document.querySelectorAll(".preloader");a=document.getElementById("balance-card");r=document.getElementById("deposit-card");o=document.getElementById("withdraw-card");t._ballance=0;t._deposit=0;t._weeklyDeposit=0;t._withdraw=0;t._weeklyWithdraw=0;h.next=11;return d.Z.retrieveUser();case 11:l=h.sent;t._userId=l.id;h.next=15;return d.Z.getAkunSiswa(t._userId);case 15:s=h.sent;t._ballance=s.saldo;c=document.getElementById("bal");u=document.getElementById("monthly-withdraw");m=document.getElementById("weekly-withdraw");p=document.getElementById("monthly-deposit");f=document.getElementById("weekly-deposit");c.innerHTML="Rp ".concat(i.Z.convertToCashFormat(t._ballance));h.next=25;return t._renderTable();case 25:u.innerHTML="Rp ".concat(i.Z.convertToCashFormat(t._withdraw));m.innerHTML="RP ".concat(i.Z.convertToCashFormat(t._weeklyWithdraw)," MINGGU INI");p.innerHTML="Rp ".concat(i.Z.convertToCashFormat(t._deposit));f.innerHTML="RP ".concat(i.Z.convertToCashFormat(t._weeklyDeposit)," MINGGU INI");a.classList.remove("hidden");r.classList.remove("hidden");o.classList.remove("hidden");n.forEach((function(e){e.remove()}));case 33:case"end":return h.stop()}}}),e)})))()},_renderTable:function e(){var t=this;return f(regeneratorRuntime.mark((function e(){var n,a,o,p,h;return regeneratorRuntime.wrap((function e(v){while(1){switch(v.prev=v.next){case 0:n=document.getElementById("transaction-table");a=n.querySelector("tbody");v.next=4;return d.Z.getTransaksiSiswa(t._userId);case 4:o=v.sent;p=r()(o.data,["tenggat_waktu_pembayaran.seconds"]).reverse();h=function e(n){Object.keys(n).forEach((function(e){if(m(n[e])==="object"){}else if(e==="nominal"){n[e]=i.Z.convertToCashFormat(n[e])}else{n[e]=n[e].toString().toUpperCase()}}));var a=new Date(n.tenggat_waktu_pembayaran.seconds*1e3);var r=n.jenis_transaksi;var o=new Date;o.setDate(a.getDate());a.setDate(a.getDate()-1);var p=a.toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"});var h=a.toLocaleDateString("id-ID");if(n.status_transaksi.toLowerCase()==="selesai"){if(a.getMonth()===(new Date).getMonth()){if(r.toLowerCase()==="pemasukan"){t._withdraw+=i.Z.convertCasttoInt(n.nominal);if(s.Z.isDateInThisWeek(a)){t._weeklyWithdraw+=i.Z.convertCasttoInt(n.nominal)}}else{t._deposit+=i.Z.convertCasttoInt(n.nominal);if(s.Z.isDateInThisWeek(a)){t._weeklyDeposit+=i.Z.convertCasttoInt(n.nominal)}}}}var v=function e(t){if(t.toLowerCase()==="pemasukan")return"text-success";return"text-failed"};var g=function e(t){if(t.toLowerCase()==="selesai")return"bg-primary text-white";return"bg-primaryDisable text-primary"};var x=function e(t){if(t.toLowerCase()==="selesai")return"M5 13l4 4L19 7";return"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"};var b=function e(t){if(t.toLowerCase()==="selesai"){return'\n          <button id="show-transaction-button-'.concat(n.id_transaksi,'"\n            class="flex w-full flex-1 px-4 py-3 text-sm font-normal text-gray-700 hover:bg-gray-100 hover:text-gray-900"\n            role="menuitem">\n            <i class="text-primary flex">\n            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>\n            </i>\n            <p class="flex ml-2 mt-1 leading-relaxed">Lihat Transaksi</p>\n          </button>')}return'\n        <button id="show-transaction-button-'.concat(n.id_transaksi,'"\n            class="flex w-full flex-1 px-4 py-3 text-sm font-normal text-gray-700 hover:bg-gray-100 hover:text-gray-900"\n            role="menuitem">\n            <i class="text-primary flex">\n            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path></svg>\n            </i>\n            <p class="flex ml-2 mt-1 leading-relaxed">Bayar Transaksi</p>\n          </button>\n          <button id="cancel-transaction-button-').concat(n.id_transaksi,'"\n            class="flex w-full flex-1 px-4 py-3 text-sm font-normal text-gray-700 hover:bg-gray-100 hover:text-gray-900"\n            role="menuitem">\n            <i class="text-primary flex"><svg class="w-8 h-8" fill="none" stroke="currentColor"\n                viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\n                  d="M6 18L18 6M6 6l12 12"></path>\n              </svg></i>\n            <p class="flex ml-2 mt-1 leading-relaxed">Batalkan Transaksi</p>\n          </button>')};var w=function e(a){a.addEventListener("click",function(){var e=f(regeneratorRuntime.mark((function e(a){var r,o;return regeneratorRuntime.wrap((function e(i){while(1){switch(i.prev=i.next){case 0:a.stopPropagation();i.next=3;return l().fire({icon:"warning",text:"Tekan pilihan untuk mengkonfirmasi",title:"Apakah benar ingin membatalkan transaksi?",showCancelButton:true,confirmButtonText:"Benar",cancelButtonText:"Tidak",customClass:{popup:"popup-sweetalert",confirmButton:"btn-sweetalert bg-success",cancelButton:"btn-sweetalert bg-failed"},buttonsStyling:false});case 3:r=i.sent;if(!r.isConfirmed){i.next=10;break}i.next=7;return d.Z.deleteTransaksiSiswa(n.id_transaksi);case 7:o=i.sent;console.log(o);t._renderTable();case 10:case"end":return i.stop()}}}),e)})));return function(t){return e.apply(this,arguments)}}());return true};var y=function e(t){t.addEventListener("click",(function(){if(n.metode_pembayaran.toLowerCase()==="daring"&&n.status_transaksi.toLowerCase()==="pembayaran"){snap.pay(n.token.toLowerCase(),{onSuccess:function(){var e=f(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function e(r){while(1){switch(r.prev=r.next){case 0:console.log(t);r.next=3;return d.Z.updateTransaction(n.id_transaksi,{status_transaksi:"selesai"});case 3:a=r.sent;console.log(a);window.dispatchEvent(new HashChangeEvent("hashchange"));case 6:case"end":return r.stop()}}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),onPending:function e(){},onClose:function e(){}});return true}c.Z.init({title:"Kode Transaksi",content:'<div class="px-10 py-6">\n              <div id="modal-content">\n                <p class="mt-2 mb-1">Kode Transaksi kamu adalah</p>\n                <div class="flex flex-row">\n                <p id="id-transaksi" class="my-2 text-3xl select-all font-bold">'.concat(n.id_transaksi,'</p>\n                <button role="button" id="copy-button" class="w-max text-primary ml-2 font-light p-2">\n                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path></svg>\n                </button>\n                </div>\n              </div>\n              <div class="flex justify-end items-center w-100 mt-4">\n                <button role="button" id="show-qr-button" class="w-max text-primary mx-1 font-light p-2">\n                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path></svg></button>\n                <button role="button" id="close-button" class="w-max bg-primary text-white mx-1 py-3 px-8 rounded-lg disabled:opacity-50">Tutup</button>\n              </div>\n            </div>')});var e=document.getElementById("modal-kode-transaksi");var t=document.getElementById("modal-content");var a=t.innerHTML;var r='<img class="mx-auto" src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data='.concat(n.id_transaksi,'"></img>');var o=document.getElementById("show-qr-button");var l=document.getElementById("close-button");var i=document.getElementById("copy-button");var s=document.getElementById("id-transaksi");i.addEventListener("click",(function(){u.Z.copyTextToClipboard(n.id_transaksi);s.focus()}));o.addEventListener("click",(function(e){if(t.innerHTML===a)t.innerHTML=r;else t.innerHTML=a}));l.addEventListener("click",(function(){e.remove()}))}));return true};if(n.status_transaksi.toLowerCase()==="pembayaran"){var k=1e3;setInterval(f(regeneratorRuntime.mark((function e(){var a,r,l,i,c,u,m,p,f;return regeneratorRuntime.wrap((function e(h){while(1){switch(h.prev=h.next){case 0:h.prev=0;a=s.Z.getTimeCounter(o),r=a.distance,l=a.hours,i=a.minutes;c="".concat(l," jam ").concat(i," menit");u='Transaksi ini akan automatis dibatalkan dalam <br><b class="flex mt-3 text-primary">'.concat(c,"</b>");m=document.getElementById("reminder-element-".concat(n.id_transaksi));m.className="p-5 text-sm font-normal text-gray-600";m.innerHTML=u;if(!(r<0)){h.next=11;break}h.next=10;return d.Z.deleteTransaksiSiswa(n.id_transaksi);case 10:t._renderTable();case 11:p=false;while(!p){f=document.getElementById("cancel-transaction-button-".concat(n.id_transaksi));p=w(f);k=6e4}h.next=17;break;case 15:h.prev=15;h.t0=h["catch"](0);case 17:case"end":return h.stop()}}}),e,null,[[0,15]])}))),k)}setInterval((function(){try{var e=false;while(!e){var t=document.getElementById("show-transaction-button-".concat(n.id_transaksi));e=y(t)}}catch(e){}}),1e3);return'<tr class="font-bold text-gray-800 mb-5 hover:shadow-lg">\n      <td class="hidden md:table-cell p-5 pr-0 text-gray-500 bg-white rounded-l-lg">'.concat(p.toUpperCase(),'</td>\n      <td class="table-cell md:hidden p-5 pr-0 text-gray-500 bg-white rounded-l-lg">').concat(h.toUpperCase(),'</td>\n      <td class="bg-white select-all hidden lg:table-cell">').concat(n.id_transaksi,'</td>\n      <td class="bg-white ').concat(v(r),'">RP ').concat(n.nominal,'</td>\n      <td class="bg-white hidden lg:table-cell">').concat(n.metode_pembayaran,'</td>\n      <td class="bg-white hidden lg:table-cell">').concat(r,'</td>\n      <td class="bg-white">\n        <div class="ml-2 md:ml-0 text-sm ').concat(g(n.status_transaksi),' p-1 md:py-2 md:px-6 rounded-lg w-max">\n        <p class="hidden md:inline">').concat(n.status_transaksi,'</p>\n        <p class="inline md:hidden"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="').concat(x(n.status_transaksi),'"></path></svg></p>\n        </div>\n      </td>\n      <td class="bg-white rounded-r-lg justify-end flex p-3 pl-0">\n        <button class="w-8 md:p-2 md:w-12 h-12 text-gray-700" id="settings">\n          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\n              d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z">\n            </path>\n          </svg>\n        </button>\n        <div id="settings-dropdown"\n          class="hidden absolute mt-10 w-56 rounded-lg shadow-lg bg-white ring-1 ring-black ring-opacity-5">\n          <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="options-menu">\n          <p id="reminder-element-').concat(n.id_transaksi,'"></p>\n            ').concat(b(n.status_transaksi),'\n          </div>\n        </div>\n      </td>\n    </tr>\n    <tr class="h-4"></tr>')};a.innerHTML='\n      <tr class="text-left text-gray-700">\n        <th class="font-normal p-5 pr-0 pt-0">Tanggal</th>\n        <th class="font-normal pb-5 pt-0 hidden lg:table-cell">ID Transaksi</th>\n        <th class="font-normal pb-5 pt-0">Nominal</th>\n        <th class="font-normal pb-5 pt-0 hidden lg:table-cell">Metode</th>\n        <th class="font-normal pb-5 pt-0 hidden lg:table-cell">Jenis</th>\n        <th class="font-normal pb-5 pt-0">Status</th>\n        <th class="font-normal pb-5 pt-0 justify-end"></th>\n      </tr>';p.forEach((function(e){a.innerHTML+=h(e)}));case 9:case"end":return v.stop()}}}),e)})))()}};const v=h},6025:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var a=n(538);var r=n.n(a);var o=n(3078);var l=n(2502);function i(e,t){return m(e)||u(e,t)||d(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(!e)return;if(typeof e==="string")return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}function c(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,a=new Array(t);n<t;n++){a[n]=e[n]}return a}function u(e,t){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(e)))return;var n=[];var a=true;var r=false;var o=undefined;try{for(var l=e[Symbol.iterator](),i;!(a=(i=l.next()).done);a=true){n.push(i.value);if(t&&n.length===t)break}}catch(e){r=true;o=e}finally{try{if(!a&&l["return"]!=null)l["return"]()}finally{if(r)throw o}}return n}function m(e){if(Array.isArray(e))return e}function p(e,t,n,a,r,o,l){try{var i=e[o](l);var s=i.value}catch(e){n(e);return}if(i.done){t(s)}else{Promise.resolve(s).then(a,r)}}function f(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function l(e){p(o,a,r,l,i,"next",e)}function i(e){p(o,a,r,l,i,"throw",e)}l(undefined)}))}}var h={render:function e(){return f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function e(t){while(1){switch(t.prev=t.next){case 0:return t.abrupt("return",'\n    <div class="text-center">\n    <p class="text-xl leading-8 font-bold tracking-tight text-gray-800 md:text-2xl md:mt-2">\n      Profil Saya\n    </p>\n  </div>\n  <div class="flex flex-col lg:flex-row">\n    <div class="p-5 rounded-lg flex flex-row md:flex-col flex-1 md:mt-4">\n      <div class="bg-gray-200 p-5 md:p-8 flex flex-1 flex-col white rounded-lg">\n      <div class="preloader p-4 flex mt-auto mb-auto ml-auto mr-auto">\n        <div class="loader loader-mini ease-linear rounded-full border-8 border-t-8 border-gray-200"></div>\n        </div>\n        <div id="account-form" class="hidden flex flex-col gap-4">\n          <div class="mx-auto mt-4 rounded-lg">\n            <div class="flex flex-col w-48 rounded-full text-white">\n              <img id="photo-profile" class="object-cover rounded-full w-full h-48 mx-auto" alt="User Photo Profile" src="http://ui-avatars.com/api/background=fff&color=fff">\n              <div id="change-photo" class="disabled:cursor-default hidden flex flex-row">\n              <label for="file-upload" class="p-3 mt-4 mr-1 ml-auto cursor-pointer w-max bg-primary text-white mx-1 rounded-lg disabled:opacity-50">\n              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg>\n              </label>\n              <input class="hidden" id="file-upload" type="file" accept="image/*">\n              <button id="delete-photo" class="disabled:cursor-default p-3 mt-4 mr-auto ml-1 cursor-pointer w-max bg-primary text-white mx-1 rounded-lg disabled:opacity-50">\n              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>\n              </button>\n              </div>\n            </div>\n          </div>\n          <div class="flex-1 pt-0 rounded-lg w-full">\n        <div class="">\n        <p class="mb-2">NISN</p>\n        <input id="input-nisn" name="NISN" disabled value="" type="text" class="mb-2 block px-5 py-3 rounded-lg w-full bg-white text-gray-500">\n        <p class="mb-2 mt-4">Email</p>\n        <input id="input-email" name="Email" disabled value="" type="email" data-rule="required no-space email" class="editable mb-2 block px-5 py-3 rounded-lg w-full bg-white disabled:text-gray-500">\n        <p class="mt-4">Password</p>\n        <input id="input-password" name="Password" disabled value="" type="password" data-rule="required no-space" class="editable block px-5 py-3 rounded-lg w-full bg-white disabled:text-gray-500">\n        </div>\n    </div>\n      </div>\n    </div>\n    </div>\n    <div class="p-5 rounded-lg flex flex-col flex-1 md:mt-4">\n    <p class="mb-4 text-lg text-center md:text-left">Informasi Siswa</p>\n      <div class="bg-gray-200 p-5 md:p-8 flex-col white rounded-lg">\n      <div class="preloader justify-center p-4 flex mt-auto mb-auto ml-auto mr-auto">\n        <div class="loader loader-mini ease-linear rounded-full border-8 border-t-8 border-gray-200"></div>\n        </div>\n        <div id="profile-form" class="hidden flex flex-col">\n          <div class="flex-1 rounded-lg w-full">\n            <div class="">\n              <p class="mb-2">Nama Lengkap</p>\n              <input id="input-nama" name="Nama" disabled value="" type="text" class="mb-2 block px-5 py-3 rounded-lg w-full bg-white text-gray-500 focus:placeholder-gray-400">\n              <p class="mb-2 mt-4">Alamat</p>\n              <textarea id="input-alamat" name="Alamat" rows="4" type="text" class="disabled:resize-none mb-2 block px-5 py-3 rounded-lg w-full bg-white disabled:text-gray-500" disabled></textarea>\n              <p class="mb-2 mt-4">Nomor Telepon</p>\n              <input id="input-no_telepon" name="Nomer Telepon" data-rule="required no-space" value="" type="number" class="editable text-md block px-5 py-3 rounded-lg w-full bg-white disabled:text-gray-500 focus:placeholder-gray-400" disabled>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="flex justify-start items-center mt-4">\n            <button id="edit-button" class="w-max bg-primary text-white mx-1 py-3 px-8 rounded-lg disabled:opacity-50">Edit Profil</button>\n            <button id="discard-button" class="hidden w-max bg-failed text-white mx-1 py-3 px-8 rounded-lg disabled:opacity-50">Batalkan</button>\n            <button id="confirm-button" class="hidden w-max bg-success text-white mx-1 py-3 px-8 rounded-lg disabled:opacity-50">Selesai</button>\n            </div>\n    </div>\n  </div>\n      ');case 1:case"end":return t.stop()}}}),e)})))()},afterRender:function e(){var t=this;return f(regeneratorRuntime.mark((function e(){var n,a,r,l;return regeneratorRuntime.wrap((function e(i){while(1){switch(i.prev=i.next){case 0:t._accountInput="";t._profileInput="";i.next=4;return o.Z.retrieveUser();case 4:n=i.sent;t._userId=n.id;i.next=8;return t._getProfileData(n.id);case 8:a=i.sent;r=document.querySelectorAll('[id^="input"]');l=document.getElementById("photo-profile");r.forEach((function(e){var t=e.id.replace("input-","");e.value=a[t]}));l.src=a.url_foto||"http://ui-avatars.com/api/?name=".concat(a.nama,"&background=fff");t._initialize();case 14:case"end":return i.stop()}}}),e)})))()},_initialize:function e(){var t=this;return f(regeneratorRuntime.mark((function e(){var n,a,o,s,d,c,u,m,p,h,v,g,x,b,w,y,k,_,I,L,B;return regeneratorRuntime.wrap((function e(E){while(1){switch(E.prev=E.next){case 0:n=document.querySelectorAll(".preloader");a=document.getElementById("profile-form");o=document.getElementById("account-form");s=document.getElementById("edit-button");d=document.getElementById("discard-button");c=document.getElementById("confirm-button");u="";m=document.getElementById("change-photo");p=document.getElementById("photo-profile");h=document.getElementById("delete-photo");v=document.getElementById("file-upload");g=document.querySelectorAll("input[data-rule]");x=i(g,3),b=x[0],w=x[1],y=x[2];k=p.src;_=b.value;I=w.value;L=y.value;if(k.includes("ui-avatars.com"))h.disabled=true;B=function e(t){if(t){s.classList.add("hidden");d.classList.remove("hidden");c.classList.remove("hidden");m.classList.remove("hidden")}else{s.classList.remove("hidden");d.classList.add("hidden");c.classList.add("hidden");m.classList.add("hidden")}};s.addEventListener("click",(function(){g.forEach((function(e){e.disabled=false;B(true)}))}));c.addEventListener("click",f(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function e(o){while(1){switch(o.prev=o.next){case 0:n=true;if(!(w.value!==I)){o.next=7;break}n=false;o.next=5;return r().fire({icon:"warning",text:"Tekan pilihan untuk mengkonfirmasi",title:"Apakah benar ingin mengubah password?",showCancelButton:true,confirmButtonText:"Benar",cancelButtonText:"Tidak",customClass:{popup:"popup-sweetalert",confirmButton:"btn-sweetalert bg-success",cancelButton:"btn-sweetalert bg-failed"},buttonsStyling:false});case 5:a=o.sent;if(a.isConfirmed){n=true}case 7:if(n){t._updateProfile(b.value,w.value,y.value,u,k);g.forEach((function(e){e.disabled=true;B(false)}))}case 8:case"end":return o.stop()}}}),e)}))));d.addEventListener("click",(function(){var e=document.querySelectorAll('span[id*="-alert"]');if(e.length>0){e.forEach((function(e){e.remove()}))}else if(e.length!==0){e.remove()}p.src=k;b.value=_;w.value=I;y.value=L;if(k.includes("ui-avatars.com"))h.disabled=true;g.forEach((function(e){e.classList.remove("border-red-500","border-opacity-50","focus:border-red-500","border-green-500","border-opacity-50","focus:border-green-500");e.disabled=true;B(false)}))}));v.addEventListener("change",function(){var e=f(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function e(a){while(1){switch(a.prev=a.next){case 0:u=t.target.files[0];n=new FileReader;p.title=u.name;n.onload=function(e){p.src=e.target.result};n.readAsDataURL(u);h.disabled=false;case 6:case"end":return a.stop()}}}),e)})));return function(t){return e.apply(this,arguments)}}());h.addEventListener("click",(function(){u="default";p.src="http://ui-avatars.com/api/?name=".concat(_,"&background=fff");h.disabled=true}));l.Z.init({formInputs:g,submitButton:c,isEdit:true});a.classList.remove("hidden");o.classList.remove("hidden");n.forEach((function(e){e.remove()}));case 28:case"end":return E.stop()}}}),e)})))()},_getProfileData:function e(t){return f(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function e(r){while(1){switch(r.prev=r.next){case 0:n=[];r.t0=n;r.next=4;return o.Z.getAkunSiswa(t);case 4:r.t1=r.sent;r.t0.push.call(r.t0,r.t1);r.t2=n;r.next=9;return o.Z.getProfilSiswa(t);case 9:r.t3=r.sent;r.t2.push.call(r.t2,r.t3);r.t4=n;r.next=14;return o.Z.getDataSiswa(t);case 14:r.t5=r.sent;r.t4.push.call(r.t4,r.t5);a={};n.forEach((function(e){Object.assign(a,e)}));return r.abrupt("return",a);case 19:case"end":return r.stop()}}}),e)})))()},_updateProfile:function e(t,n,a,r,l){var i=this;return f(regeneratorRuntime.mark((function e(){var s,d,c;return regeneratorRuntime.wrap((function e(u){while(1){switch(u.prev=u.next){case 0:s={email:t,password:n,no_telepon:a,url_foto:l};if(!(r!=="")){u.next=13;break}if(!(l!==""&&!l.includes("ui-avatars.com"))){u.next=5;break}u.next=5;return o.Z.deleteFile(l);case 5:if(!(r==="default")){u.next=9;break}s.url_foto="";u.next=13;break;case 9:u.next=11;return o.Z.uploadFile(r);case 11:d=u.sent;s.url_foto=d.url;case 13:u.next=15;return o.Z.updateAkunSiswa(i._userId,s);case 15:c=u.sent;console.log(c);case 17:case"end":return u.stop()}}}),e)})))()}};const v=h}}]);
//# sourceMappingURL=main.6018f93d.js.map