(()=>{var e={896:(e,t,r)=>{var n=r(622),s=(r(766),r(342)),o=r(876);e.exports={entry:{main:"./src/scripts/index.js"},output:{path:n.join(__dirname,"build"),publicPath:"/",filename:"[name].js"},target:"web",devtool:"source-map",module:{rules:[{test:/\.html$/,use:[{loader:"html-loader"}]},{test:/\.(sa|sc|c)ss$/,use:["style-loader",{loader:"css-loader",options:{importLoaders:1}},"postcss-loader"]},{test:/\.(png|svg|jpg|gif)$/,use:["file-loader"]}]},plugins:[new o({patterns:[{from:"./src/public/",to:"./"}]}),new s({template:"./src/index.html",filename:"./index.html",excludeChunks:["server"]})]}},86:(e,t,r)=>{var n=r(535).merge,s=r(78),o=r(896);e.exports=n(o,{mode:"development",plugins:[new s.HotModuleReplacementPlugin,new s.NoEmitOnErrorsPlugin],stats:"errors-only"})},876:e=>{"use strict";e.exports=require("copy-webpack-plugin")},342:e=>{"use strict";e.exports=require("html-webpack-plugin")},622:e=>{"use strict";e.exports=require("path")},78:e=>{"use strict";e.exports=require("webpack")},535:e=>{"use strict";e.exports=require("webpack-merge")},766:e=>{"use strict";e.exports=require("webpackbar")}},t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=r(78),t=r.n(e);const n=require("webpack-dev-middleware");var s=r.n(n);const o=require("webpack-hot-middleware");var a=r.n(o);require("regenerator-runtime");const u=require("express");var i=r.n(u),c=r(622),p=r.n(c);const l=require("body-parser");var d=r.n(l);const f=require("cors");var m=r.n(f);const b=require("helmet");var g=r.n(b);const y=require("hpp");var v=r.n(y);const w=require("xss-clean");var h=r.n(w);const j=require("cookie-parser");var x=r.n(j);const k={PORT:process.env.PORT||8080,DIST_DIR:__dirname};var O=r(86),P=r.n(O);function _(e){return("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){var t="function"==typeof Map?new Map:void 0;return function(e){if(null===e||(e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return A(e,arguments,q(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),E(n,e)}(e)}function A(e,t,r){return(D()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var s=new(Function.bind.apply(e,n));return r&&E(s,r.prototype),s}).apply(null,arguments)}function D(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function E(e,t){return(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){return(Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Error;function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t,r,n,s,o,a){try{var u=e[o](a),i=u.value}catch(e){return void r(e)}u.done?t(i):Promise.resolve(i).then(n,s)}function M(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var o=e.apply(t,r);function a(e){C(o,n,s,a,u,"next",e)}function u(e){C(o,n,s,a,u,"throw",e)}a(void 0)}))}}const F=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){var e=M(regeneratorRuntime.mark((function e(r,n,s){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.forEach(function(){var e=M(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.doc(r.params.id).delete();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.status(200).json({status:"success",error:!1,results:"Deleted ".concat(t.length," document")})}catch(e){n.status(502).json({status:"success",error:!0,response:e})}case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},L=function(e){return function(){var t=M(regeneratorRuntime.mark((function t(r,n,s){var o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.doc(r.params.id).get();case 3:if((o=t.sent).exists){t.next=7;break}return n.status(401).json({status:"failed",error:!0,message:"No document found with that id",response:r.params}),t.abrupt("return",{success:!1});case 7:return a=o.data(),n.status(200).json(N({status:"success",error:!1},a)),t.abrupt("return",{success:!0});case 12:t.prev=12,t.t0=t.catch(0),n.status(502).json({status:"success",error:!0,response:t.t0});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,r,n){return t.apply(this,arguments)}}()},K=function(e){return function(){var t=M(regeneratorRuntime.mark((function t(r,n,s){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=[],t.next=4,e.get();case 4:if(t.sent.forEach((function(e){o.push(e.data())})),n.status(200).json(N({status:"success",error:!1,results:o.length},o)),!(o.length>0)){t.next=9;break}return t.abrupt("return",{success:!0});case 9:return t.abrupt("return",{success:!1});case 12:t.prev=12,t.t0=t.catch(0),n.status(502).json({status:"success",error:!0,response:t.t0});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,r,n){return t.apply(this,arguments)}}()},Y=require("firebase/app");var B=r.n(Y);require("firebase/firestore");const X=B().initializeApp({apiKey:"AIzaSyAW4XYKvHlGB2n85IrI311kXrFp-S_11YM",authDomain:"celenganku-app.firebaseapp.com",databaseURL:"https://celenganku-app.firebaseio.com",projectId:"celenganku-app",storageBucket:"celenganku-app.appspot.com",messagingSenderId:"414105942761",appId:"1:414105942761:web:f68bc17372af32cf848e78",measurementId:"G-QQ3YEP9ZCT"}).firestore(),$={data:X.collection("data_siswa"),akun:X.collection("akun_siswa"),profil:X.collection("profil_siswa")};function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){H(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(e,t,r,n,s,o,a){try{var u=e[o](a),i=u.value}catch(e){return void r(e)}u.done?t(i):Promise.resolve(i).then(n,s)}function W(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var o=e.apply(t,r);function a(e){Q(o,n,s,a,u,"next",e)}function u(e){Q(o,n,s,a,u,"throw",e)}a(void 0)}))}}var U,Z;const J={getAllSiswaData:K($.data),getAllAkunSiswa:K($.akun),getDataSiswa:L($.data),getProfilSiswa:L($.profil),getAkunSiswa:L($.akun),deleteAkunSiswa:F($.akun,$.profil),createAkunSiswa:(Z=W(regeneratorRuntime.mark((function e(t,r,n){var s,o,a,u,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=t.body,o=s.nisn,a=s.email,u=s.password,i=s.no_telepon,c=s.url_foto,o&&a&&u){e.next=4;break}return e.abrupt("return",r.status(404).json({status:"failed",error:!0,message:"Please provide NISN, Email, or password",response:t.body}));case 4:return e.next=6,$.data.doc(o).get();case 6:return e.sent.exists||r.status(401).json({status:"failed",error:!0,message:"This NISN isn't registered",response:t.body}),e.next=10,$.akun.doc(o).get();case 10:return e.sent.exists&&r.status(401).json({status:"failed",error:!0,message:"Account with this NISN already exist",response:t.body}),e.next=14,$.akun.doc(o).set({nisn:o,email:a,password:u,saldo:0});case 14:return e.next=16,$.profil.doc(o).set({nisn:o,no_telepon:i||"",url_foto:c||""});case 16:return t.body.password=void 0,r.status(200).json({status:"success",error:!1,response:t.body}),e.abrupt("return",G(G({},t.body),{},{error:!1}));case 21:e.prev=21,e.t0=e.catch(0),console.log(e.t0),r.status(502).json({status:"success",error:!0,response:e.t0});case 25:case"end":return e.stop()}}),e,null,[[0,21]])}))),function(e,t,r){return Z.apply(this,arguments)}),updateAkunSiswa:(U=W(regeneratorRuntime.mark((function e(t,r,n){var s,o,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=t.params.id,e.next=4,$.akun.doc(s).get();case 4:return(o=e.sent).exists||r.status(401).json({status:"failed",error:!0,message:"Account with this NISN doesn't exist",response:t.body}),a=o.data(),u={email:t.body.email||a.email,password:t.body.password||a.password,no_telepon:t.body.no_telepon||a.no_telepon,url_foto:t.body.url_foto||a.url_foto},e.next=10,$.akun.doc(s).update({email:u.email,password:u.password});case 10:return e.next=12,$.profil.doc(s).set({no_telepon:u.no_telepon||"",url_foto:u.url_foto||""});case 12:return t.body.password=void 0,r.status(200).json({status:"success",error:!1,response:t.body}),e.abrupt("return",{success:!0});case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0),r.status(502).json({status:"failed",error:!0,response:e.t0});case 21:case"end":return e.stop()}}),e,null,[[0,17]])}))),function(e,t,r){return U.apply(this,arguments)})},V=require("dotenv");var ee=r.n(V);const te=require("jsonwebtoken");var re=r.n(te);function ne(e,t,r,n,s,o,a){try{var u=e[o](a),i=u.value}catch(e){return void r(e)}u.done?t(i):Promise.resolve(i).then(n,s)}function se(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var o=e.apply(t,r);function a(e){ne(o,n,s,a,u,"next",e)}function u(e){ne(o,n,s,a,u,"throw",e)}a(void 0)}))}}ee().config();var oe,ae,ue,ie,ce=X.collection("akun_admin"),pe=function(e){var t="user";return e.length<10&&(t="admin"),re().sign({id:e,role:t},process.env.ACCESS_TOKEN_SECRET,{expiresIn:process.env.ACCESS_EXPIRE_TIME})};const le={requireAuth:function(e,t,r){var n=e.cookies.jwt;n?re().verify(n,process.env.ACCESS_TOKEN_SECRET,(function(e,n){e?(console.log(e.message),t.redirect("/login")):r()})):t.redirect("/login")},restrictTo:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r,n){t.includes(e.user.role)||r.status(401).json({status:"failed",error:!0,message:"You're not allowed to do that action",response:e.body}),n()}},adminLogin:(ie=se(regeneratorRuntime.mark((function e(t,r,n){var s,o,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=t.body,o=s.id_admin,a=s.password,o&&a){e.next=4;break}return e.abrupt("return",r.status(404).json({status:"failed",error:!0,message:"Please provide ID, or password",response:t.body}));case 4:return e.next=6,ce.where("id_admin","==",o).where("password","==",a).get();case 6:e.sent.empty&&r.status(401).json({status:"failed",error:!0,message:"Wrong ID or Password",response:t.body}),u=pe(o),t.body.password=void 0,r.cookie("jwt",u,{httpOnly:!0,maxAge:2592e5}),r.status(200).json({status:"success",error:!1,response:t.body}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),n(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),function(e,t,r){return ie.apply(this,arguments)}),login:(ue=se(regeneratorRuntime.mark((function e(t,r,n){var s,o,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=t.body,o=s.nisn,a=s.password,o&&a){e.next=4;break}return e.abrupt("return",r.status(404).json({status:"failed",error:!0,message:"Please provide NISN, or password",response:t.body}));case 4:return e.next=6,$.akun.where("nisn","==",o).where("password","==",a).get();case 6:e.sent.empty&&r.status(401).json({status:"error",error:!0,title:"NISN atau Password salah",message:"Silahkan coba lagi",response:t.body}),u=pe(o),t.body.password=void 0,r.cookie("jwt",u,{httpOnly:!0,maxAge:2592e5}),r.status(200).json({status:"success",title:"Login Berhasil",message:"Mengalihkan ke halaman dashboard",error:!1,response:t.body}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),n(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),function(e,t,r){return ue.apply(this,arguments)}),logout:function(e,t){t.cookie("jwt","",{maxAge:1}),t.redirect("/")},register:(ae=se(regeneratorRuntime.mark((function e(t,r,n){var s,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.createAkunSiswa(t,r,n);case 2:s=e.sent,o=s.nisn,console.log(o),a=pe(o),t.body.password=void 0,r.cookie("jwt",a,{httpOnly:!0,maxAge:2592e5}),r.status(200).json({status:"success",error:!1,response:t.body});case 9:case"end":return e.stop()}}),e)}))),function(e,t,r){return ae.apply(this,arguments)}),retrieveToken:(oe=se(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.status(200).json({status:"success",error:!1,response:t.cookies.jwt});case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return oe.apply(this,arguments)})};var de=i().Router();de.use(d().json()),de.post("/register",le.register),de.post("/login",le.login),de.use(le.requireAuth),de.route("/").get(J.getAllAkunSiswa),de.route("/data").get(J.getDataSiswa),de.route("/:id").get(J.getAkunSiswa).patch(J.updateAkunSiswa).delete(J.deleteAkunSiswa),de.route("/:id/profil").get(J.getProfilSiswa),de.route("/:id/data").get(J.getDataSiswa);const fe=de;function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(e,t,r,n,s,o,a){try{var u=e[o](a),i=u.value}catch(e){return void r(e)}u.done?t(i):Promise.resolve(i).then(n,s)}function ve(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var o=e.apply(t,r);function a(e){ye(o,n,s,a,u,"next",e)}function u(e){ye(o,n,s,a,u,"throw",e)}a(void 0)}))}}var we,he,je=X.collection("akun_admin");const xe={getAdmin:L($.akun),deleteAdmin:F($.akun,$.profil),createAdmin:(he=ve(regeneratorRuntime.mark((function e(t,r,n){var s,o,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=t.body,o=s.id_admin,a=s.nama,u=s.password,o&&a&&u){e.next=4;break}return e.abrupt("return",r.status(404).json({status:"failed",error:!0,message:"Please provide ID, Name, or password",response:t.body}));case 4:return e.next=6,je.doc(o).get();case 6:return e.sent.exists&&r.status(401).json({status:"failed",error:!0,message:"Account with this ID already exist",response:t.body}),e.next=10,je.akun.doc(o).set({id_admin:o,nama:a,password:u});case 10:return t.body.password=void 0,r.status(200).json({status:"success",error:!1,response:t.body}),e.abrupt("return",be(be({},t.body),{},{error:!1}));case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0),r.status(502).json({status:"success",error:!0,response:e.t0});case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),function(e,t,r){return he.apply(this,arguments)}),updateAdmin:(we=ve(regeneratorRuntime.mark((function e(t,r,n){var s,o,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=t.params.id_admin,e.next=4,je.doc(s).get();case 4:if((o=e.sent).exists||r.status(401).json({status:"failed",error:!0,message:"Account with this ID doesn't exist",response:t.body}),a=o.data(),(u={id_admin:t.body.id_admin||a.id_admin,nama:t.body.nama||a.nama,password:t.body.password||a.password}).email&&u.password){e.next=10;break}return e.abrupt("return",r.status(404).json({status:"failed",error:!0,message:"Please provide Email, or password",response:t.body}));case 10:return e.next=12,je.doc(s).update({id_admin:u.id_admin,nama:u.nama,password:u.password});case 12:return t.body.password=void 0,r.status(200).json({status:"success",error:!1,response:t.body}),e.abrupt("return",{success:!0});case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0),r.status(502).json({status:"failed",error:!0,response:e.t0});case 21:case"end":return e.stop()}}),e,null,[[0,17]])}))),function(e,t,r){return we.apply(this,arguments)})};var ke=i().Router();ke.use(d().json()),ke.post("/login",le.adminLogin),ke.use(le.requireAuth),ke.route("/").get(xe.getAdmin),ke.route("/:id").patch(xe.updateAdmin).delete(xe.deleteAdmin);const Oe=ke;var Pe=i()(),_e=p().join(__dirname,"index.html"),Se=t()(P());Pe.use(s()(Se,{publicPath:P().output.publicPath})),Pe.use(a()(Se)),Pe.use(m()()),Pe.use(g()()),Pe.use(h()()),Pe.use(v()()),Pe.use(x()()),Pe.use(i().json({limit:"15kb"})),Pe.use("/api/siswa",fe),Pe.use("/api/admin",Oe),Pe.get("/token",le.requireAuth,le.retrieveToken),Pe.use("/logout",le.logout),Pe.use(d().json()),Pe.use(i().static(__dirname)),Pe.use("/",(function(e,t){return t.sendFile(_e)})),Pe.get("*",(function(e,t,r){Se.outputFileSystem.readFile(p().join(k.DIST_DIR,"index.html"),(function(e,n){if(e)return r(e);t.set("content-type","text/html"),t.send(n),t.end()}))})),Pe.listen(k.PORT,(function(){console.log("App listening to ".concat(k.PORT,"....")),console.log("Press Ctrl+C to quit.")}))})()})();